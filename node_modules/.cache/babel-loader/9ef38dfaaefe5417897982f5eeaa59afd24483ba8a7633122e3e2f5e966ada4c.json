{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, toDisplayString as _toDisplayString, openBlock as _openBlock, createBlock as _createBlock, createTextVNode as _createTextVNode, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"checkout-form-container\"\n};\nconst _hoisted_2 = {\n  class: \"flex h-screen\"\n};\nconst _hoisted_3 = {\n  class: \"w-1/2 border-r border-gray-200 flex flex-col\"\n};\nconst _hoisted_4 = {\n  class: \"flex-1 overflow-y-auto\"\n};\nconst _hoisted_5 = {\n  class: \"w-1/2 flex flex-col\"\n};\nconst _hoisted_6 = {\n  class: \"flex-1 overflow-y-auto p-4\"\n};\nconst _hoisted_7 = {\n  class: \"mb-6\"\n};\nconst _hoisted_8 = {\n  class: \"text-lg font-bold mb-4\"\n};\nconst _hoisted_9 = {\n  class: \"mb-6\"\n};\nconst _hoisted_10 = {\n  class: \"mb-6\"\n};\nconst _hoisted_11 = {\n  key: 0,\n  class: \"mt-2 text-green-600\"\n};\nconst _hoisted_12 = {\n  key: 1,\n  class: \"mt-2 text-red-600\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_table_column = _resolveComponent(\"el-table-column\");\n  const _component_el_table = _resolveComponent(\"el-table\");\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_form = _resolveComponent(\"el-form\");\n  const _component_el_input_number = _resolveComponent(\"el-input-number\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createCommentVNode(\" Left Menu List (50% width) \"), _createElementVNode(\"div\", _hoisted_3, [_cache[8] || (_cache[8] = _createElementVNode(\"div\", {\n    class: \"p-4 border-b border-gray-200\"\n  }, [_createElementVNode(\"h2\", {\n    class: \"text-lg font-bold\"\n  }, \"菜单列表\")], -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_4, [_createVNode(_component_el_table, {\n    data: $setup.menuList,\n    style: {\n      \"width\": \"100%\"\n    },\n    size: \"small\",\n    onRowDblclick: $setup.handleDishDblClick,\n    class: \"menu-table\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_table_column, {\n      prop: \"dishId\",\n      label: \"菜品ID\",\n      width: \"120\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"dishName\",\n      label: \"菜品名称\",\n      width: \"200\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"price\",\n      label: \"价格\",\n      width: \"120\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"description\",\n      label: \"描述\"\n    })]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"data\"])])]), _createCommentVNode(\" Right Order Operations (50% width) \"), _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, [_createCommentVNode(\" Order Creation/Editing Section \"), _createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"h2\", _hoisted_8, _toDisplayString($setup.isEditMode ? '订单编辑' : '订单创建'), 1 /* TEXT */), _createVNode(_component_el_form, {\n    \"label-width\": \"80px\"\n  }, {\n    default: _withCtx(() => [$setup.isEditMode ? (_openBlock(), _createBlock(_component_el_form_item, {\n      key: 0,\n      label: \"订单ID\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        modelValue: $setup.editOrderId,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.editOrderId = $event),\n        disabled: \"\"\n      }, null, 8 /* PROPS */, [\"modelValue\"])]),\n      _: 1 /* STABLE */\n    })) : _createCommentVNode(\"v-if\", true), _createVNode(_component_el_form_item, {\n      label: \"顾客ID\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        modelValue: $setup.currentCustomerId,\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.currentCustomerId = $event),\n        type: \"number\",\n        placeholder: \"输入顾客ID\",\n        disabled: $setup.isEditMode && !$setup.editOrderId\n      }, null, 8 /* PROPS */, [\"modelValue\", \"disabled\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_form_item, {\n      label: \"桌子ID\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        modelValue: $setup.currentTableId,\n        \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.currentTableId = $event),\n        type: \"number\",\n        placeholder: \"输入桌子ID\",\n        disabled: $setup.isEditMode && !$setup.editOrderId\n      }, null, 8 /* PROPS */, [\"modelValue\", \"disabled\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_form_item, {\n      label: \"人数\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        modelValue: $setup.currentPeopleCount,\n        \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $setup.currentPeopleCount = $event),\n        type: \"number\",\n        min: \"1\",\n        placeholder: \"输入人数\",\n        disabled: $setup.isEditMode && !$setup.editOrderId\n      }, null, 8 /* PROPS */, [\"modelValue\", \"disabled\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_form_item, null, {\n      default: _withCtx(() => [_createVNode(_component_el_button, {\n        type: \"primary\",\n        onClick: _cache[4] || (_cache[4] = $event => $setup.isEditMode ? $setup.handleEditSaveOrder() : $setup.handleCreateOrder()),\n        disabled: !$setup.canSubmitOrder\n      }, {\n        default: _withCtx(() => [_createTextVNode(_toDisplayString($setup.isEditMode ? '保存更新' : '创建订单'), 1 /* TEXT */)]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"disabled\"]), $setup.isEditMode || $setup.orderId ? (_openBlock(), _createBlock(_component_el_button, {\n        key: 0,\n        type: \"warning\",\n        onClick: $setup.handleExitEdit,\n        class: \"ml-2\"\n      }, {\n        default: _withCtx(() => _cache[9] || (_cache[9] = [_createTextVNode(\" 取消 \")])),\n        _: 1 /* STABLE */\n      })) : _createCommentVNode(\"v-if\", true)]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  })]), _createCommentVNode(\" Selected Dishes Section \"), _createElementVNode(\"div\", _hoisted_9, [_cache[11] || (_cache[11] = _createElementVNode(\"h2\", {\n    class: \"text-lg font-bold mb-4\"\n  }, \"已选菜品\", -1 /* HOISTED */)), _createVNode(_component_el_table, {\n    data: $setup.currentSelectedDishes,\n    style: {\n      \"width\": \"100%\"\n    },\n    size: \"small\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_table_column, {\n      prop: \"dishId\",\n      label: \"菜品ID\",\n      width: \"120\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"dishName\",\n      label: \"菜品名称\",\n      width: \"150\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"quantity\",\n      label: \"数量\",\n      width: \"120\"\n    }, {\n      default: _withCtx(scope => [_createVNode(_component_el_input_number, {\n        modelValue: scope.row.quantity,\n        \"onUpdate:modelValue\": $event => scope.row.quantity = $event,\n        min: 1,\n        onChange: q => $setup.handleUpdateQuantity(scope.row, q),\n        style: {\n          \"width\": \"100%\"\n        }\n      }, null, 8 /* PROPS */, [\"modelValue\", \"onUpdate:modelValue\", \"onChange\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_table_column, {\n      label: \"操作\",\n      width: \"100\",\n      align: \"center\"\n    }, {\n      default: _withCtx(scope => [_createVNode(_component_el_button, {\n        size: \"small\",\n        type: \"danger\",\n        onClick: $event => $setup.removeDish(scope.row)\n      }, {\n        default: _withCtx(() => _cache[10] || (_cache[10] = [_createTextVNode(\"移除\")])),\n        _: 2 /* DYNAMIC */\n      }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"])]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"data\"])]), _createCommentVNode(\" Order Query Section \"), _createElementVNode(\"div\", _hoisted_10, [_cache[14] || (_cache[14] = _createElementVNode(\"h2\", {\n    class: \"text-lg font-bold mb-4\"\n  }, \"订单查询\", -1 /* HOISTED */)), _createVNode(_component_el_form, {\n    \"label-width\": \"160px\",\n    class: \"mb-4\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_form_item, {\n      label: \"根据桌号查订单\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        modelValue: $setup.queryTableId,\n        \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $setup.queryTableId = $event),\n        type: \"number\",\n        placeholder: \"输入桌子ID\",\n        style: {\n          \"width\": \"240px\"\n        }\n      }, null, 8 /* PROPS */, [\"modelValue\"]), _createVNode(_component_el_button, {\n        onClick: $setup.handleQueryOrderByTableId,\n        class: \"ml-2\"\n      }, {\n        default: _withCtx(() => _cache[12] || (_cache[12] = [_createTextVNode(\"查询\")])),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_form_item, {\n      label: \"根据订单查菜品\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        modelValue: $setup.queryOrderId,\n        \"onUpdate:modelValue\": _cache[6] || (_cache[6] = $event => $setup.queryOrderId = $event),\n        type: \"number\",\n        placeholder: \"输入订单ID\",\n        style: {\n          \"width\": \"240px\"\n        }\n      }, null, 8 /* PROPS */, [\"modelValue\"]), _createVNode(_component_el_button, {\n        onClick: $setup.handleQueryOrderDetails,\n        class: \"ml-2\"\n      }, {\n        default: _withCtx(() => _cache[13] || (_cache[13] = [_createTextVNode(\"查询\")])),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  })]), _createCommentVNode(\" Order Checkout Section \"), _createElementVNode(\"div\", null, [_cache[16] || (_cache[16] = _createElementVNode(\"h2\", {\n    class: \"text-lg font-bold mb-4\"\n  }, \"结账\", -1 /* HOISTED */)), _createVNode(_component_el_form, {\n    \"label-width\": \"160px\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_form_item, {\n      label: \"订单ID\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        modelValue: $setup.checkoutOrderId,\n        \"onUpdate:modelValue\": _cache[7] || (_cache[7] = $event => $setup.checkoutOrderId = $event),\n        type: \"number\",\n        placeholder: \"输入订单ID\",\n        style: {\n          \"width\": \"120px\"\n        }\n      }, null, 8 /* PROPS */, [\"modelValue\"]), _createVNode(_component_el_button, {\n        type: \"success\",\n        class: \"ml-2\",\n        onClick: $setup.handleCheckout\n      }, {\n        default: _withCtx(() => _cache[15] || (_cache[15] = [_createTextVNode(\"结账\")])),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  }), $setup.message ? (_openBlock(), _createElementBlock(\"div\", _hoisted_11, _toDisplayString($setup.message), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), $setup.error ? (_openBlock(), _createElementBlock(\"div\", _hoisted_12, _toDisplayString($setup.error), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)])])])])]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createCommentVNode","_hoisted_3","_hoisted_4","_createVNode","_component_el_table","data","$setup","menuList","style","size","onRowDblclick","handleDishDblClick","default","_withCtx","_component_el_table_column","prop","label","width","_","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_toDisplayString","isEditMode","_component_el_form","_createBlock","_component_el_form_item","_component_el_input","modelValue","editOrderId","_cache","$event","disabled","currentCustomerId","type","placeholder","currentTableId","currentPeopleCount","min","_component_el_button","onClick","handleEditSaveOrder","handleCreateOrder","canSubmitOrder","_createTextVNode","orderId","handleExitEdit","_hoisted_9","currentSelectedDishes","scope","_component_el_input_number","row","quantity","onChange","q","handleUpdateQuantity","align","removeDish","_hoisted_10","queryTableId","handleQueryOrderByTableId","queryOrderId","handleQueryOrderDetails","checkoutOrderId","handleCheckout","message","_hoisted_11","error","_hoisted_12"],"sources":["D:\\数据库课程设计（饭店系统）\\restaurant-ordering-system\\src\\components\\checkout\\CheckoutForm.vue"],"sourcesContent":["<template>\r\n  <div class=\"checkout-form-container\">\r\n    <div class=\"flex h-screen\">\r\n      <!-- Left Menu List (50% width) -->\r\n      <div class=\"w-1/2 border-r border-gray-200 flex flex-col\">\r\n        <div class=\"p-4 border-b border-gray-200\">\r\n          <h2 class=\"text-lg font-bold\">菜单列表</h2>\r\n        </div>\r\n        <div class=\"flex-1 overflow-y-auto\">\r\n          <el-table \r\n            :data=\"menuList\" \r\n            style=\"width: 100%;\" \r\n            size=\"small\" \r\n            @row-dblclick=\"handleDishDblClick\"\r\n            class=\"menu-table\"\r\n          >\r\n            <el-table-column prop=\"dishId\" label=\"菜品ID\" width=\"120\" />\r\n            <el-table-column prop=\"dishName\" label=\"菜品名称\" width=\"200\" />\r\n            <el-table-column prop=\"price\" label=\"价格\" width=\"120\" />\r\n            <el-table-column prop=\"description\" label=\"描述\" />\r\n          </el-table>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Right Order Operations (50% width) -->\r\n      <div class=\"w-1/2 flex flex-col\">\r\n        <div class=\"flex-1 overflow-y-auto p-4\">\r\n          <!-- Order Creation/Editing Section -->\r\n          <div class=\"mb-6\">\r\n            <h2 class=\"text-lg font-bold mb-4\">{{ isEditMode ? '订单编辑' : '订单创建' }}</h2>\r\n            <el-form label-width=\"80px\">\r\n              <el-form-item label=\"订单ID\" v-if=\"isEditMode\">\r\n                <el-input v-model=\"editOrderId\" disabled />\r\n              </el-form-item>\r\n              <el-form-item label=\"顾客ID\">\r\n                <el-input \r\n                  v-model=\"currentCustomerId\" \r\n                  type=\"number\" \r\n                  placeholder=\"输入顾客ID\" \r\n                  :disabled=\"isEditMode && !editOrderId\" \r\n                />\r\n              </el-form-item>\r\n              <el-form-item label=\"桌子ID\">\r\n                <el-input \r\n                  v-model=\"currentTableId\" \r\n                  type=\"number\" \r\n                  placeholder=\"输入桌子ID\" \r\n                  :disabled=\"isEditMode && !editOrderId\" \r\n                />\r\n              </el-form-item>\r\n              <el-form-item label=\"人数\">\r\n                <el-input \r\n                  v-model=\"currentPeopleCount\" \r\n                  type=\"number\" \r\n                  min=\"1\" \r\n                  placeholder=\"输入人数\" \r\n                  :disabled=\"isEditMode && !editOrderId\" \r\n                />\r\n              </el-form-item>\r\n              <el-form-item>\r\n                <el-button \r\n                  type=\"primary\" \r\n                  @click=\"isEditMode ? handleEditSaveOrder() : handleCreateOrder()\"\r\n                  :disabled=\"!canSubmitOrder\"\r\n                >\r\n                  {{ isEditMode ? '保存更新' : '创建订单' }}\r\n                </el-button>\r\n                <el-button \r\n                  type=\"warning\" \r\n                  @click=\"handleExitEdit\" \r\n                  v-if=\"isEditMode || orderId\"\r\n                  class=\"ml-2\"\r\n                >\r\n                  取消\r\n                </el-button>\r\n              </el-form-item>\r\n            </el-form>\r\n          </div>\r\n\r\n          <!-- Selected Dishes Section -->\r\n          <div class=\"mb-6\">\r\n            <h2 class=\"text-lg font-bold mb-4\">已选菜品</h2>\r\n            <el-table :data=\"currentSelectedDishes\" style=\"width: 100%;\" size=\"small\">\r\n              <el-table-column prop=\"dishId\" label=\"菜品ID\" width=\"120\" />\r\n              <el-table-column prop=\"dishName\" label=\"菜品名称\" width=\"150\" />\r\n              <el-table-column prop=\"quantity\" label=\"数量\" width=\"120\">\r\n                <template #default=\"scope\">\r\n                  <el-input-number \r\n                    v-model=\"scope.row.quantity\" \r\n                    :min=\"1\" \r\n                    @change=\"q => handleUpdateQuantity(scope.row, q)\" \r\n                    style=\"width: 100%;\" \r\n                  />\r\n                </template>\r\n              </el-table-column>\r\n              <el-table-column label=\"操作\" width=\"100\" align=\"center\">\r\n                <template #default=\"scope\">\r\n                  <el-button size=\"small\" type=\"danger\" @click=\"removeDish(scope.row)\">移除</el-button>\r\n                </template>\r\n              </el-table-column>\r\n            </el-table>\r\n          </div>\r\n\r\n          <!-- Order Query Section -->\r\n          <div class=\"mb-6\">\r\n            <h2 class=\"text-lg font-bold mb-4\">订单查询</h2>\r\n            <el-form label-width=\"160px\" class=\"mb-4\">\r\n              <el-form-item label=\"根据桌号查订单\">\r\n                <el-input v-model=\"queryTableId\" type=\"number\" placeholder=\"输入桌子ID\" style=\"width: 240px;\" />\r\n                <el-button @click=\"handleQueryOrderByTableId\" class=\"ml-2\">查询</el-button>\r\n              </el-form-item>\r\n              <el-form-item label=\"根据订单查菜品\">\r\n                <el-input v-model=\"queryOrderId\" type=\"number\" placeholder=\"输入订单ID\" style=\"width: 240px;\" />\r\n                <el-button @click=\"handleQueryOrderDetails\" class=\"ml-2\">查询</el-button>\r\n              </el-form-item>\r\n            </el-form>\r\n          </div>\r\n\r\n          <!-- Order Checkout Section -->\r\n          <div>\r\n            <h2 class=\"text-lg font-bold mb-4\">结账</h2>\r\n            <el-form label-width=\"160px\">\r\n              <el-form-item label=\"订单ID\">\r\n                <el-input v-model=\"checkoutOrderId\" type=\"number\" placeholder=\"输入订单ID\" style=\"width: 120px;\" />\r\n                <el-button type=\"success\" class=\"ml-2\" @click=\"handleCheckout\">结账</el-button>\r\n              </el-form-item>\r\n            </el-form>\r\n            <div v-if=\"message\" class=\"mt-2 text-green-600\">{{ message }}</div>\r\n            <div v-if=\"error\" class=\"mt-2 text-red-600\">{{ error }}</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, computed } from 'vue';\r\nimport { ElMessage } from 'element-plus';\r\nimport { getMenuList } from '@/api/menu';\r\nimport {\r\n  createOrder,\r\n  addDishToOrder,\r\n  removeDishFromOrder,\r\n  updateDishQuantity,\r\n  getOrderIdWithDishId,\r\n  checkoutOrder,\r\n  getOrderDetails\r\n} from '@/api/checkout';\r\nimport { getOrderById, updateOrder } from '@/api/order';\r\n\r\n// Menu List\r\nconst menuList = ref([]);\r\n\r\n// Order Creation/Editing\r\nconst currentCustomerId = ref('');\r\nconst currentTableId = ref('');\r\nconst currentPeopleCount = ref('');\r\nconst currentSelectedDishes = ref([]);\r\nconst orderId = ref('');\r\nconst editOrderId = ref('');\r\n\r\n// Order Query\r\nconst queryTableId = ref('');\r\nconst queryOrderId = ref('');\r\n\r\n// Checkout\r\nconst checkoutOrderId = ref('');\r\n\r\n// Messages\r\nconst message = ref('');\r\nconst error = ref('');\r\n\r\n// Computed\r\nconst isEditMode = computed(() => !!editOrderId.value);\r\nconst canSubmitOrder = computed(() => {\r\n  return (currentCustomerId.value && currentTableId.value && currentPeopleCount.value) || \r\n         (isEditMode.value && editOrderId.value);\r\n});\r\n\r\nonMounted(async () => {\r\n  await fetchMenuList();\r\n});\r\n\r\nasync function fetchMenuList() {\r\n  try {\r\n    const res = await getMenuList();\r\n    menuList.value = Array.isArray(res) ? res : (res.data || []);\r\n  } catch (err) {\r\n    error.value = err;\r\n  }\r\n}\r\n\r\n// Order Creation\r\nasync function handleCreateOrder() {\r\n  message.value = '';\r\n  error.value = '';\r\n  try {\r\n    const res = await createOrder({\r\n      tableId: Number(currentTableId.value),\r\n      customerId: Number(currentCustomerId.value),\r\n      peopleCount: Number(currentPeopleCount.value)\r\n    });\r\n    orderId.value = res.data?.orderId ? String(res.data.orderId) : '';\r\n    if (orderId.value) {\r\n      ElMessage.success('订单创建成功，ID: ' + orderId.value);\r\n    } else {\r\n      ElMessage.warning('订单创建成功，但未返回订单ID');\r\n    }\r\n  } catch (err) {\r\n    error.value = err;\r\n  }\r\n}\r\n\r\nfunction handleDishDblClick(row) {\r\n  if (!orderId.value && !editOrderId.value) {\r\n    ElMessage.warning('请先创建或查询订单');\r\n    return;\r\n  }\r\n  \r\n  const targetOrderId = isEditMode.value ? editOrderId.value : orderId.value;\r\n  const exist = currentSelectedDishes.value.find(d => d.dishId === row.dishId);\r\n  \r\n  if (exist) {\r\n    exist.quantity++;\r\n    handleUpdateQuantity(exist, exist.quantity);\r\n    return;\r\n  }\r\n  \r\n  addDishToOrder({ \r\n    orderId: targetOrderId, \r\n    dishId: row.dishId, \r\n    quantity: 1 \r\n  })\r\n    .then(() => {\r\n      currentSelectedDishes.value.push({ ...row, quantity: 1 });\r\n      ElMessage.success('已添加菜品: ' + row.dishName);\r\n    })\r\n    .catch(err => {\r\n      error.value = err;\r\n    });\r\n}\r\n\r\nfunction removeDish(row) {\r\n  const targetOrderId = isEditMode.value ? editOrderId.value : orderId.value;\r\n  if (!targetOrderId) return;\r\n  \r\n  removeDishFromOrder({ \r\n    orderId: targetOrderId, \r\n    dishId: row.dishId \r\n  })\r\n    .then(() => {\r\n      currentSelectedDishes.value = currentSelectedDishes.value.filter(d => d.dishId !== row.dishId);\r\n      ElMessage.success('已移除菜品: ' + row.dishName);\r\n    })\r\n    .catch(err => {\r\n      error.value = err;\r\n    });\r\n}\r\n\r\nfunction handleUpdateQuantity(row, quantity) {\r\n  const targetOrderId = isEditMode.value ? editOrderId.value : orderId.value;\r\n  if (!targetOrderId) return;\r\n  \r\n  updateDishQuantity({ \r\n    orderId: targetOrderId, \r\n    dishId: row.dishId, \r\n    quantity \r\n  })\r\n    .then(() => {\r\n      ElMessage.success('数量更新成功');\r\n    })\r\n    .catch(err => {\r\n      error.value = err;\r\n    });\r\n}\r\n\r\nfunction handleExitEdit() {\r\n  orderId.value = '';\r\n  editOrderId.value = '';\r\n  currentCustomerId.value = '';\r\n  currentTableId.value = '';\r\n  currentPeopleCount.value = '';\r\n  currentSelectedDishes.value = [];\r\n}\r\n\r\n// Order Query\r\nasync function handleQueryOrderByTableId() {\r\n  message.value = '';\r\n  error.value = '';\r\n  try {\r\n    const res = await getOrderIdWithDishId(queryTableId.value);\r\n    if (res.data) {\r\n      loadOrderData(res.data);\r\n      ElMessage.success('查询成功');\r\n    } else {\r\n      ElMessage.warning('未找到相关订单');\r\n    }\r\n  } catch (err) {\r\n    error.value = err;\r\n  }\r\n}\r\n\r\nasync function handleQueryOrderDetails() {\r\n  message.value = '';\r\n  error.value = '';\r\n  try {\r\n    const res = await getOrderDetails(queryOrderId.value);\r\n    if (res.data) {\r\n      loadOrderData(res.data);\r\n      ElMessage.success('查询成功');\r\n    } else {\r\n      ElMessage.warning('未找到相关订单');\r\n    }\r\n  } catch (err) {\r\n    error.value = err;\r\n  }\r\n}\r\n\r\nfunction loadOrderData(orderData) {\r\n  editOrderId.value = orderData.orderId || '';\r\n  currentCustomerId.value = orderData.customerId || '';\r\n  currentTableId.value = orderData.tableId || '';\r\n  currentPeopleCount.value = orderData.peopleCount || '';\r\n  \r\n  if (orderData.dishes) {\r\n    currentSelectedDishes.value = Array.isArray(orderData.dishes) ? \r\n      orderData.dishes : \r\n      JSON.parse(orderData.dishes);\r\n  } else {\r\n    currentSelectedDishes.value = [];\r\n  }\r\n}\r\n\r\n// Order Editing\r\nasync function handleEditSaveOrder() {\r\n  message.value = '';\r\n  error.value = '';\r\n  try {\r\n    const orderData = {\r\n      orderId: editOrderId.value,\r\n      customerId: currentCustomerId.value,\r\n      tableId: currentTableId.value,\r\n      peopleCount: currentPeopleCount.value,\r\n      dishes: currentSelectedDishes.value\r\n    };\r\n    \r\n    await updateOrder(orderData);\r\n    ElMessage.success('订单更新成功');\r\n    handleExitEdit();\r\n  } catch (err) {\r\n    error.value = err;\r\n  }\r\n}\r\n\r\n// Checkout\r\nasync function handleCheckout() {\r\n  message.value = '';\r\n  error.value = '';\r\n  try {\r\n    await checkoutOrder(checkoutOrderId.value);\r\n    ElMessage.success('结账成功');\r\n    checkoutOrderId.value = '';\r\n  } catch (err) {\r\n    error.value = err;\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.checkout-form-container {\r\n  height: 100vh;\r\n  overflow: hidden;\r\n}\r\n\r\n.menu-table {\r\n  height: 100%;\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}