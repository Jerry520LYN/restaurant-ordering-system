{"ast":null,"code":"import { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, createBlock as _createBlock, toDisplayString as _toDisplayString } from \"vue\";\nconst _hoisted_1 = {\n  class: \"menu-card-layout\"\n};\nconst _hoisted_2 = {\n  class: \"hot-dishes-header\"\n};\nconst _hoisted_3 = {\n  class: \"controls\"\n};\nconst _hoisted_4 = {\n  key: 0,\n  class: \"date-picker-container\"\n};\nconst _hoisted_5 = {\n  key: 0,\n  class: \"loading-container\"\n};\nconst _hoisted_6 = {\n  key: 1,\n  class: \"error-message\"\n};\nconst _hoisted_7 = {\n  key: 3,\n  class: \"no-data\"\n};\nconst _hoisted_8 = {\n  key: 4,\n  class: \"debug-info\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_date_picker = _resolveComponent(\"el-date-picker\");\n  const _component_el_alert = _resolveComponent(\"el-alert\");\n  const _component_el_col = _resolveComponent(\"el-col\");\n  const _component_el_row = _resolveComponent(\"el-row\");\n  const _component_el_empty = _resolveComponent(\"el-empty\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_cache[4] || (_cache[4] = _createElementVNode(\"h2\", {\n    class: \"hot-dishes-title\"\n  }, \"菜品展示\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_3, [_createVNode(_component_el_button, {\n    type: \"primary\",\n    onClick: $setup.fetchAllDishes\n  }, {\n    default: _withCtx(() => _cache[2] || (_cache[2] = [_createTextVNode(\"显示全部菜品\")])),\n    _: 1 /* STABLE */\n  }), $setup.displayMode === 'hot' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [_createVNode(_component_el_date_picker, {\n    modelValue: $setup.startDate,\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.startDate = $event),\n    type: \"date\",\n    placeholder: \"开始日期\",\n    format: \"YYYY-MM-DD\",\n    \"value-format\": \"YYYY-MM-DD\",\n    style: {\n      \"margin-right\": \"10px\"\n    }\n  }, null, 8 /* PROPS */, [\"modelValue\"]), _createVNode(_component_el_date_picker, {\n    modelValue: $setup.endDate,\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.endDate = $event),\n    type: \"date\",\n    placeholder: \"结束日期\",\n    format: \"YYYY-MM-DD\",\n    \"value-format\": \"YYYY-MM-DD\",\n    style: {\n      \"margin-right\": \"10px\"\n    }\n  }, null, 8 /* PROPS */, [\"modelValue\"])])) : _createCommentVNode(\"v-if\", true), _createVNode(_component_el_button, {\n    type: \"success\",\n    onClick: $setup.fetchHotDishes\n  }, {\n    default: _withCtx(() => _cache[3] || (_cache[3] = [_createTextVNode(\"显示热门菜品\")])),\n    _: 1 /* STABLE */\n  })])]), _createCommentVNode(\" 加载状态 \"), $setup.menuStore.loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [_createVNode($setup[\"ElLoading\"], {\n    fullscreen: false\n  })])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" 错误信息 \"), $setup.menuStore.error ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [_createVNode(_component_el_alert, {\n    title: $setup.menuStore.error,\n    type: \"error\",\n    \"show-icon\": \"\"\n  }, null, 8 /* PROPS */, [\"title\"])])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" 菜单卡片列表 \"), !$setup.menuStore.loading && !$setup.menuStore.error ? (_openBlock(), _createBlock(_component_el_row, {\n    key: 2,\n    gutter: 20\n  }, {\n    default: _withCtx(() => [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(($setup.displayDishes || []).slice(0, 8), dish => {\n      return _openBlock(), _createBlock(_component_el_col, {\n        key: dish.dish_id || dish.dishId,\n        xs: 24,\n        sm: 12,\n        md: 8,\n        lg: 6,\n        style: {\n          \"margin-bottom\": \"20px\"\n        }\n      }, {\n        default: _withCtx(() => [_createVNode($setup[\"MenuCard\"], {\n          dish: dish\n        }, null, 8 /* PROPS */, [\"dish\"])]),\n        _: 2 /* DYNAMIC */\n      }, 1024 /* DYNAMIC_SLOTS */);\n    }), 128 /* KEYED_FRAGMENT */))]),\n    _: 1 /* STABLE */\n  })) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" 无数据提示 \"), !$setup.menuStore.loading && !$setup.menuStore.error && (!$setup.displayDishes || $setup.displayDishes.length === 0) ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [_createVNode(_component_el_empty, {\n    description: \"暂无菜品数据\"\n  })])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" 调试信息 \"), _ctx.process.env.NODE_ENV === 'development' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [_cache[5] || (_cache[5] = _createElementVNode(\"h3\", null, \"调试信息：\", -1 /* HOISTED */)), _createElementVNode(\"p\", null, \"显示模式: \" + _toDisplayString($setup.displayMode), 1 /* TEXT */), _createElementVNode(\"p\", null, \"菜品数量: \" + _toDisplayString($setup.displayDishes ? $setup.displayDishes.length : 0), 1 /* TEXT */), _createElementVNode(\"p\", null, \"菜品数据: \" + _toDisplayString($setup.displayDishes ? $setup.displayDishes.slice(0, 2) : '无数据'), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_createVNode","_component_el_button","type","onClick","$setup","fetchAllDishes","default","_withCtx","_cache","_createTextVNode","_","displayMode","_hoisted_4","_component_el_date_picker","modelValue","startDate","$event","placeholder","format","style","endDate","_createCommentVNode","fetchHotDishes","menuStore","loading","_hoisted_5","fullscreen","error","_hoisted_6","_component_el_alert","title","_createBlock","_component_el_row","gutter","_Fragment","_renderList","displayDishes","slice","dish","_component_el_col","dish_id","dishId","xs","sm","md","lg","length","_hoisted_7","_component_el_empty","description","_ctx","process","env","NODE_ENV","_hoisted_8","_toDisplayString"],"sources":["D:\\数据库课程设计（饭店系统）\\restaurant-ordering-system\\src\\components\\menu\\MenuCardLayout.vue"],"sourcesContent":["<template>\r\n    <div class=\"menu-card-layout\">\r\n        <div class=\"hot-dishes-header\">\r\n            <h2 class=\"hot-dishes-title\">菜品展示</h2>\r\n            <div class=\"controls\">\r\n                <el-button type=\"primary\" @click=\"fetchAllDishes\">显示全部菜品</el-button>\r\n                <div class=\"date-picker-container\" v-if=\"displayMode === 'hot'\">\r\n                    <el-date-picker\r\n                        v-model=\"startDate\"\r\n                        type=\"date\"\r\n                        placeholder=\"开始日期\"\r\n                        format=\"YYYY-MM-DD\"\r\n                        value-format=\"YYYY-MM-DD\"\r\n                        style=\"margin-right: 10px;\"\r\n                    />\r\n                    <el-date-picker\r\n                        v-model=\"endDate\"\r\n                        type=\"date\"\r\n                        placeholder=\"结束日期\"\r\n                        format=\"YYYY-MM-DD\"\r\n                        value-format=\"YYYY-MM-DD\"\r\n                        style=\"margin-right: 10px;\"\r\n                    />\r\n                </div>\r\n                <el-button type=\"success\" @click=\"fetchHotDishes\">显示热门菜品</el-button>\r\n            </div>\r\n        </div>\r\n        \r\n        <!-- 加载状态 -->\r\n        <div v-if=\"menuStore.loading\" class=\"loading-container\">\r\n            <el-loading :fullscreen=\"false\" />\r\n        </div>\r\n        \r\n        <!-- 错误信息 -->\r\n        <div v-if=\"menuStore.error\" class=\"error-message\">\r\n            <el-alert :title=\"menuStore.error\" type=\"error\" show-icon />\r\n        </div>\r\n        \r\n        <!-- 菜单卡片列表 -->\r\n        <el-row v-if=\"!menuStore.loading && !menuStore.error\" :gutter=\"20\">\r\n            <el-col \r\n                v-for=\"dish in (displayDishes || []).slice(0, 8)\" \r\n                :key=\"dish.dish_id || dish.dishId\" \r\n                :xs=\"24\" \r\n                :sm=\"12\" \r\n                :md=\"8\" \r\n                :lg=\"6\"\r\n                style=\"margin-bottom: 20px;\"\r\n            >\r\n                <MenuCard :dish=\"dish\" />\r\n            </el-col>\r\n        </el-row>\r\n        \r\n        <!-- 无数据提示 -->\r\n        <div v-if=\"!menuStore.loading && !menuStore.error && (!displayDishes || displayDishes.length === 0)\" class=\"no-data\">\r\n            <el-empty description=\"暂无菜品数据\" />\r\n        </div>\r\n        \r\n        <!-- 调试信息 -->\r\n        <div v-if=\"process.env.NODE_ENV === 'development'\" class=\"debug-info\">\r\n            <h3>调试信息：</h3>\r\n            <p>显示模式: {{ displayMode }}</p>\r\n            <p>菜品数量: {{ displayDishes ? displayDishes.length : 0 }}</p>\r\n            <p>菜品数据: {{ displayDishes ? displayDishes.slice(0, 2) : '无数据' }}</p>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, computed, watch } from 'vue';\r\nimport { ElMessage, ElLoading } from 'element-plus';\r\nimport MenuCard from './MenuCard.vue';\r\nimport { useMenuStore } from '@/stores/menu';\r\n\r\n// 响应式数据\r\nconst startDate = ref('');\r\nconst endDate = ref('');\r\nconst menuStore = useMenuStore();\r\nconst displayMode = ref('all'); // 'all' 或 'hot'\r\n\r\n// 计算属性：根据显示模式选择数据源\r\nconst displayDishes = computed(() => {\r\n    if (displayMode.value === 'hot') {\r\n        return menuStore.hotDishes || [];\r\n    } else {\r\n        return menuStore.menuList || [];\r\n    }\r\n});\r\n\r\n// 设置默认日期（当前日期前后7天）\r\nconst setDefaultDates = () => {\r\n    const today = new Date();\r\n    const sevenDaysAgo = new Date(today);\r\n    sevenDaysAgo.setDate(today.getDate() - 7);\r\n    \r\n    startDate.value = sevenDaysAgo.toISOString().split('T')[0];\r\n    endDate.value = today.toISOString().split('T')[0];\r\n};\r\n\r\n// 获取全部菜品\r\nconst fetchAllDishes = async () => {\r\n    displayMode.value = 'all';\r\n    try {\r\n        await menuStore.fetchMenuList();\r\n        ElMessage.success('获取全部菜品成功');\r\n    } catch (error) {\r\n        ElMessage.error('获取全部菜品失败: ' + error.message);\r\n    }\r\n};\r\n\r\n// 获取热门菜品\r\nconst fetchHotDishes = async () => {\r\n    if (!startDate.value || !endDate.value) {\r\n        ElMessage.warning('请先设置日期范围');\r\n        return;\r\n    }\r\n    \r\n    if (new Date(startDate.value) > new Date(endDate.value)) {\r\n        ElMessage.error('开始日期不能晚于结束日期');\r\n        return;\r\n    }\r\n    \r\n    displayMode.value = 'hot';\r\n    try {\r\n        await menuStore.fetchHotDishes(startDate.value, endDate.value);\r\n        ElMessage.success('获取热门菜品成功');\r\n    } catch (error) {\r\n        ElMessage.error('获取热门菜品失败: ' + error.message);\r\n    }\r\n};\r\n\r\n// 监听显示模式变化，自动显示日期选择器\r\nwatch(displayMode, (newMode) => {\r\n    if (newMode === 'hot' && (!startDate.value || !endDate.value)) {\r\n        setDefaultDates();\r\n    }\r\n});\r\n\r\n// 组件挂载时设置默认日期并获取全部菜品\r\nonMounted(() => {\r\n    setDefaultDates();\r\n    fetchAllDishes(); // 默认显示全部菜品\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.menu-card-layout {\r\n    padding: 20px;\r\n}\r\n\r\n.hot-dishes-header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    margin-bottom: 20px;\r\n    flex-wrap: wrap;\r\n    gap: 10px;\r\n}\r\n\r\n.hot-dishes-title {\r\n    margin: 0;\r\n    color: #333;\r\n    font-size: 24px;\r\n    font-weight: bold;\r\n}\r\n\r\n.controls {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 10px;\r\n}\r\n\r\n.date-picker-container {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 10px;\r\n}\r\n\r\n.loading-container {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    min-height: 200px;\r\n}\r\n\r\n.error-message {\r\n    margin: 20px 0;\r\n}\r\n\r\n.no-data {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    min-height: 200px;\r\n}\r\n\r\n.debug-info {\r\n    margin-top: 20px;\r\n    padding: 15px;\r\n    background-color: #f5f5f5;\r\n    border-radius: 5px;\r\n    font-size: 12px;\r\n}\r\n\r\n.debug-info h3 {\r\n    margin: 0 0 10px 0;\r\n    color: #666;\r\n}\r\n\r\n.debug-info p {\r\n    margin: 5px 0;\r\n    color: #666;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n    .hot-dishes-header {\r\n        flex-direction: column;\r\n        align-items: flex-start;\r\n    }\r\n    \r\n    .controls {\r\n        width: 100%;\r\n        flex-wrap: wrap;\r\n    }\r\n    \r\n    .date-picker-container {\r\n        width: 100%;\r\n        flex-wrap: wrap;\r\n    }\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}