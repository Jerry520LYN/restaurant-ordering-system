{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport { ref } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { ElMessage } from 'element-plus';\nimport { getCustomerList } from '@/api/customer';\nexport default {\n  __name: 'CustomerForm',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const form = ref({\n      customerId: '',\n      phone: ''\n    });\n    const error = ref(null);\n    const router = useRouter();\n    const handleCustomerLogin = async () => {\n      error.value = null;\n      try {\n        const res = await getCustomerList();\n        const match = (res.data || res).find(c => String(c.customerId) === String(form.value.customerId) && String(c.phone) === String(form.value.phone));\n        if (match) {\n          localStorage.setItem('customerId', match.customerId);\n          ElMessage.success('登录成功');\n          router.push('/customer-dashboard/menu');\n        } else {\n          error.value = '顾客ID或手机号错误';\n        }\n      } catch (e) {\n        error.value = e.message || '登录失败';\n      }\n    };\n    const __returned__ = {\n      form,\n      error,\n      router,\n      handleCustomerLogin,\n      ref,\n      get useRouter() {\n        return useRouter;\n      },\n      get ElMessage() {\n        return ElMessage;\n      },\n      get getCustomerList() {\n        return getCustomerList;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","useRouter","ElMessage","getCustomerList","form","customerId","phone","error","router","handleCustomerLogin","value","res","match","data","find","c","String","localStorage","setItem","success","push","e","message"],"sources":["D:/数据库课程设计（饭店系统）/restaurant-ordering-system/src/components/auth/CustomerForm.vue"],"sourcesContent":["// 这个文件里放顾客登录的顾客ID的input框和顾客phone的input框还有登录按钮\r\n//根据获取的顾客信息来判断顾客输入的Id和phone是否匹配\r\n//如果匹配，就跳转到顾客的菜单列表页面\r\n//在Logingorm中加一个按钮，点击它就能打开这个顾客登陆的页面\r\n//需要给之后打开的组件传递当前用户的Id\r\n//如果登陆成功就路由跳转到CustomerDashboard.vue文件\r\n\r\n<template>\r\n  <form @submit.prevent=\"handleCustomerLogin\" class=\"max-w-sm mx-auto mt-10 p-6 bg-white rounded shadow\">\r\n    <div class=\"mb-4\">\r\n      <label for=\"customerId\" class=\"block mb-2\">顾客ID</label>\r\n      <input\r\n        id=\"customerId\"\r\n        v-model=\"form.customerId\"\r\n        type=\"text\"\r\n        required\r\n        placeholder=\"请输入顾客ID\"\r\n        class=\"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n      />\r\n    </div>\r\n    <div class=\"mb-4\">\r\n      <label for=\"phone\" class=\"block mb-2\">手机号</label>\r\n      <input\r\n        id=\"phone\"\r\n        v-model=\"form.phone\"\r\n        type=\"text\"\r\n        required\r\n        placeholder=\"请输入手机号\"\r\n        class=\"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n      />\r\n    </div>\r\n    <div v-if=\"error\" class=\"text-red-500 mb-4\">{{ error }}</div>\r\n    <div class=\"flex justify-center\">\r\n      <button type=\"submit\" class=\"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-md cursor-pointer\">登录</button>\r\n    </div>\r\n  </form>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport { ElMessage } from 'element-plus'\r\nimport { getCustomerList } from '@/api/customer'\r\n\r\nconst form = ref({ customerId: '', phone: '' })\r\nconst error = ref(null)\r\nconst router = useRouter()\r\n\r\nconst handleCustomerLogin = async () => {\r\n  error.value = null\r\n  try {\r\n    const res = await getCustomerList()\r\n    const match = (res.data || res).find(c => String(c.customerId) === String(form.value.customerId) && String(c.phone) === String(form.value.phone))\r\n    if (match) {\r\n      localStorage.setItem('customerId', match.customerId)\r\n      ElMessage.success('登录成功')\r\n      router.push('/customer-dashboard/menu')\r\n    } else {\r\n      error.value = '顾客ID或手机号错误'\r\n    }\r\n  } catch (e) {\r\n    error.value = e.message || '登录失败'\r\n  }\r\n}\r\n</script>"],"mappings":";;;AAuCA,SAASA,GAAG,QAAQ,KAAK;AACzB,SAASC,SAAS,QAAQ,YAAY;AACtC,SAASC,SAAS,QAAQ,cAAc;AACxC,SAASC,eAAe,QAAQ,gBAAgB;;;;;;;IAEhD,MAAMC,IAAI,GAAGJ,GAAG,CAAC;MAAEK,UAAU,EAAE,EAAE;MAAEC,KAAK,EAAE;IAAG,CAAC,CAAC;IAC/C,MAAMC,KAAK,GAAGP,GAAG,CAAC,IAAI,CAAC;IACvB,MAAMQ,MAAM,GAAGP,SAAS,CAAC,CAAC;IAE1B,MAAMQ,mBAAmB,GAAG,MAAAA,CAAA,KAAY;MACtCF,KAAK,CAACG,KAAK,GAAG,IAAI;MAClB,IAAI;QACF,MAAMC,GAAG,GAAG,MAAMR,eAAe,CAAC,CAAC;QACnC,MAAMS,KAAK,GAAG,CAACD,GAAG,CAACE,IAAI,IAAIF,GAAG,EAAEG,IAAI,CAACC,CAAC,IAAIC,MAAM,CAACD,CAAC,CAACV,UAAU,CAAC,KAAKW,MAAM,CAACZ,IAAI,CAACM,KAAK,CAACL,UAAU,CAAC,IAAIW,MAAM,CAACD,CAAC,CAACT,KAAK,CAAC,KAAKU,MAAM,CAACZ,IAAI,CAACM,KAAK,CAACJ,KAAK,CAAC,CAAC;QACjJ,IAAIM,KAAK,EAAE;UACTK,YAAY,CAACC,OAAO,CAAC,YAAY,EAAEN,KAAK,CAACP,UAAU,CAAC;UACpDH,SAAS,CAACiB,OAAO,CAAC,MAAM,CAAC;UACzBX,MAAM,CAACY,IAAI,CAAC,0BAA0B,CAAC;QACzC,CAAC,MAAM;UACLb,KAAK,CAACG,KAAK,GAAG,YAAY;QAC5B;MACF,CAAC,CAAC,OAAOW,CAAC,EAAE;QACVd,KAAK,CAACG,KAAK,GAAGW,CAAC,CAACC,OAAO,IAAI,MAAM;MACnC;IACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}