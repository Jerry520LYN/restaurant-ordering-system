{"ast":null,"code":"import instance from '@/utils/request';\nimport { useAuthStore } from '@/stores/auth';\n// 叫号\nexport const callNumber = async ({\n  phone,\n  peopleNumber\n}) => {\n  try {\n    const authStore = useAuthStore();\n    const token = authStore.token;\n    console.log('Token:', token); // 调试：检查token\n\n    const params = {\n      authenticity: token,\n      phone,\n      peopleNumber\n    };\n    const response = await instance.post('/callingnumber/add', null, {\n      params\n    });\n    return response;\n  } catch (error) {\n    throw error.response?.data?.message || '叫号失败api1';\n  }\n};\n\n// 移除叫号\nexport const removeCallingNumber = async callingNumberId => {\n  try {\n    const authStore = useAuthStore();\n    const token = authStore.token;\n    const params = {\n      authenticity: token,\n      callingNumberId\n    };\n    const response = await instance.post('/callingnumber/remove', null, {\n      params\n    });\n    return response;\n  } catch (error) {\n    throw error.response?.data?.message || '移除叫号失败api2';\n  }\n};\n\n// 获取所有队列\nexport const getAllQueues = async () => {\n  try {\n    const authStore = useAuthStore();\n    const token = authStore.token;\n    console.log('Token:', token); // 调试：检查token\n\n    const params = {\n      authenticity: token\n    };\n    console.log('Request params:', params); // 调试：检查请求参数\n\n    const response = await instance.get('/callingnumber/queues', {\n      params\n    });\n    console.log('Response:', response); // 调试：检查响应\n    return response;\n  } catch (error) {\n    console.error('getAllQueues error:', error); // 调试：查看具体错误\n    throw error.response?.data?.message || '获取队列失败api3';\n  }\n};\nexport const startDining = async callingNumberId => {\n  try {\n    const authStore = useAuthStore();\n    const token = authStore.token;\n    const params = {\n      authenticity: token,\n      callingNumberId,\n      status: 'DINING'\n    };\n    const response = await instance.post('/callingnumber/updateStatus', null, {\n      params\n    });\n    return response;\n  } catch (error) {\n    throw error.response?.data?.message || '开始就餐失败api4';\n  }\n};","map":{"version":3,"names":["instance","useAuthStore","callNumber","phone","peopleNumber","authStore","token","console","log","params","authenticity","response","post","error","data","message","removeCallingNumber","callingNumberId","getAllQueues","get","startDining","status"],"sources":["D:/数据库课程设计（饭店系统）/restaurant-ordering-system/src/api/callingNumber.js"],"sourcesContent":["import instance from '@/utils/request';\r\nimport { useAuthStore } from '@/stores/auth';\r\n// 叫号\r\nexport const callNumber = async ({ phone, peopleNumber }) => {\r\n  try{\r\n  const authStore = useAuthStore();\r\n  const token = authStore.token;\r\n  console.log('Token:', token); // 调试：检查token\r\n  \r\n  const params ={\r\n    authenticity: token,\r\n    phone,\r\n    peopleNumber\r\n  }\r\n  const response = await instance.post('/callingnumber/add', null, {\r\n    params\r\n    });\r\n    return response;\r\n  } catch (error) {\r\n    throw error.response?.data?.message || '叫号失败api1';\r\n  }\r\n}\r\n\r\n// 移除叫号\r\nexport const removeCallingNumber = async (callingNumberId) => {\r\n  try{\r\n  const authStore = useAuthStore();\r\n  const token = authStore.token;\r\n    const params ={\r\n    authenticity: token,\r\n    callingNumberId\r\n  }\r\n  const response = await instance.post('/callingnumber/remove', null, {\r\n    params\r\n  });\r\n  return response;\r\n  } catch (error) {\r\n    throw error.response?.data?.message || '移除叫号失败api2';\r\n  }\r\n}\r\n\r\n// 获取所有队列\r\nexport const getAllQueues = async () => {\r\n  try{\r\n  const authStore = useAuthStore();\r\n  const token = authStore.token;\r\n  console.log('Token:', token); // 调试：检查token\r\n  \r\n  const params ={\r\n    authenticity: token,\r\n  }\r\n  console.log('Request params:', params); // 调试：检查请求参数\r\n  \r\n  const response = await instance.get('/callingnumber/queues', {\r\n    params\r\n  });\r\n  console.log('Response:', response); // 调试：检查响应\r\n  return response;\r\n  } catch (error) {\r\n    console.error('getAllQueues error:', error); // 调试：查看具体错误\r\n    throw error.response?.data?.message || '获取队列失败api3';\r\n  }\r\n} \r\n\r\n\r\nexport const startDining = async (callingNumberId) => {\r\n  try{\r\n  const authStore = useAuthStore();\r\n  const token = authStore.token;\r\n  const params ={\r\n    authenticity: token,\r\n    callingNumberId,\r\n    status: 'DINING'\r\n  }\r\n  const response = await instance.post('/callingnumber/updateStatus', null, {\r\n    params\r\n  });\r\n  return response;\r\n  } catch (error) {\r\n    throw error.response?.data?.message || '开始就餐失败api4';\r\n  }\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}