{"ast":null,"code":"import { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"p-5\"\n};\nconst _hoisted_2 = {\n  class: \"flex justify-between items-center mb-5\"\n};\nconst _hoisted_3 = {\n  class: \"flex gap-2\"\n};\nconst _hoisted_4 = {\n  class: \"flex justify-center items-center w-20 h-20 bg-gray-100 text-gray-500 text-xl\"\n};\nconst _hoisted_5 = {\n  key: 0,\n  class: \"flex justify-center items-center min-h-50\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_table_column = _resolveComponent(\"el-table-column\");\n  const _component_Picture = _resolveComponent(\"Picture\");\n  const _component_el_icon = _resolveComponent(\"el-icon\");\n  const _component_el_image = _resolveComponent(\"el-image\");\n  const _component_el_table = _resolveComponent(\"el-table\");\n  const _component_el_empty = _resolveComponent(\"el-empty\");\n  const _component_MenuUpdateCard = _resolveComponent(\"MenuUpdateCard\");\n  const _component_el_dialog = _resolveComponent(\"el-dialog\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"span\", _hoisted_2, [_cache[4] || (_cache[4] = _createElementVNode(\"h2\", {\n    class: \"m-0 text-gray-800 text-xl font-bold\"\n  }, \"全部菜品信息\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_3, [_createVNode(_component_el_button, {\n    type: \"primary\",\n    onClick: $options.getMenuList\n  }, {\n    default: _withCtx(() => _cache[2] || (_cache[2] = [_createTextVNode(\" 刷新菜品列表 \")])),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"onClick\"]), _createVNode(_component_el_button, {\n    type: \"primary\",\n    onClick: _ctx.addDish\n  }, {\n    default: _withCtx(() => _cache[3] || (_cache[3] = [_createTextVNode(\" 添加菜品 \")])),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"onClick\"])]), _createCommentVNode(\"span中的div不会换行\")]), _createVNode(_component_el_table, {\n    data: $data.menuData,\n    style: {\n      \"width\": \"100%\"\n    },\n    stripe: \"\",\n    border: \"\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_table_column, {\n      prop: \"dishId\",\n      label: \"菜品ID\",\n      width: \"120\",\n      align: \"center\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"dishName\",\n      label: \"菜品名称\",\n      width: \"180\",\n      align: \"center\"\n    }, {\n      default: _withCtx(scope => [_createTextVNode(_toDisplayString(scope.row.dishName || scope.row.dish_name || '未知菜品'), 1 /* TEXT */)]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_table_column, {\n      prop: \"price\",\n      label: \"价格\",\n      width: \"120\",\n      align: \"center\"\n    }, {\n      default: _withCtx(scope => [_createTextVNode(\" ¥\" + _toDisplayString(scope.row.price || '0.00'), 1 /* TEXT */)]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_table_column, {\n      prop: \"description\",\n      label: \"描述\",\n      \"min-width\": \"200\",\n      \"show-overflow-tooltip\": \"\"\n    }, {\n      default: _withCtx(scope => [_createTextVNode(_toDisplayString(scope.row.description || '暂无描述'), 1 /* TEXT */)]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_table_column, {\n      prop: \"imageUrl\",\n      label: \"图片\",\n      width: \"200\",\n      align: \"center\"\n    }, {\n      default: _withCtx(scope => [_createVNode(_component_el_image, {\n        src: scope.row.imageUrl || scope.row.image_url || 'https://images.unsplash.com/photo-1567620905732-2d1ec7ab7445?w=200&h=150&fit=crop',\n        class: \"w-20 h-20\",\n        fit: \"cover\",\n        \"preview-src-list\": [scope.row.imageUrl || scope.row.image_url || 'https://images.unsplash.com/photo-1567620905732-2d1ec7ab7445?w=200&h=150&fit=crop']\n      }, {\n        error: _withCtx(() => [_createElementVNode(\"div\", _hoisted_4, [_createVNode(_component_el_icon, null, {\n          default: _withCtx(() => [_createVNode(_component_Picture)]),\n          _: 1 /* STABLE */\n        })])]),\n        _: 2 /* DYNAMIC */\n      }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"src\", \"preview-src-list\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_table_column, {\n      label: \"操作\",\n      width: \"150\",\n      align: \"center\",\n      fixed: \"right\"\n    }, {\n      default: _withCtx(scope => [_createVNode(_component_el_button, {\n        size: \"small\",\n        type: \"primary\",\n        onClick: $event => $options.updateDish(scope.row)\n      }, {\n        default: _withCtx(() => _cache[5] || (_cache[5] = [_createTextVNode(\" 更新 \")])),\n        _: 2 /* DYNAMIC */\n      }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"]), _createVNode(_component_el_button, {\n        size: \"small\",\n        type: \"danger\",\n        onClick: $event => $options.deleteDish(scope.row)\n      }, {\n        default: _withCtx(() => _cache[6] || (_cache[6] = [_createTextVNode(\" 删除 \")])),\n        _: 2 /* DYNAMIC */\n      }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"])]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"data\"]), _createCommentVNode(\" 无数据提示 \"), !$data.menuData || $data.menuData.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [_createVNode(_component_el_empty, {\n    description: \"暂无菜品数据\"\n  })])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" 更新菜品对话框 \"), _createVNode(_component_el_dialog, {\n    modelValue: $data.updateDialogVisible,\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.updateDialogVisible = $event),\n    title: \"更新菜品\",\n    width: \"500px\",\n    onClosed: $options.handleDialogClose\n  }, {\n    default: _withCtx(() => [$data.currentDish ? (_openBlock(), _createBlock(_component_MenuUpdateCard, {\n      key: 0,\n      dish: $data.currentDish,\n      onUpdateSuccess: $options.handleUpdateSuccess,\n      onClose: _cache[0] || (_cache[0] = $event => $data.updateDialogVisible = false)\n    }, null, 8 /* PROPS */, [\"dish\", \"onUpdateSuccess\"])) : _createCommentVNode(\"v-if\", true)]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\", \"onClosed\"])]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_createVNode","_component_el_button","type","onClick","$options","getMenuList","default","_withCtx","_cache","_createTextVNode","_","_ctx","addDish","_createCommentVNode","_component_el_table","data","$data","menuData","style","stripe","border","_component_el_table_column","prop","label","width","align","scope","_toDisplayString","row","dishName","dish_name","price","description","_component_el_image","src","imageUrl","image_url","fit","error","_hoisted_4","_component_el_icon","_component_Picture","fixed","size","$event","updateDish","deleteDish","length","_hoisted_5","_component_el_empty","_component_el_dialog","modelValue","updateDialogVisible","title","onClosed","handleDialogClose","currentDish","_createBlock","_component_MenuUpdateCard","dish","onUpdateSuccess","handleUpdateSuccess","onClose"],"sources":["D:\\数据库课程设计（饭店系统）\\restaurant-ordering-system\\src\\components\\menu\\MenuForm.vue"],"sourcesContent":["<template>\r\n  <div class=\"p-5\">\r\n    <span class=\"flex justify-between items-center mb-5\">\r\n      <h2 class=\"m-0 text-gray-800 text-xl font-bold\">全部菜品信息</h2>\r\n      <div class=\"flex gap-2\">\r\n        <el-button type=\"primary\" @click=\"getMenuList\" >\r\n          刷新菜品列表\r\n        </el-button>\r\n        <el-button type=\"primary\" @click=\"addDish\">\r\n          添加菜品\r\n        </el-button>\r\n      </div>\r\n      <!--span中的div不会换行-->\r\n    </span>\r\n    \r\n    <el-table\r\n      :data=\"menuData\"\r\n      style=\"width: 100%\"\r\n      stripe\r\n      border>\r\n      <el-table-column\r\n        prop=\"dishId\"\r\n        label=\"菜品ID\"\r\n        width=\"120\"\r\n        align=\"center\">\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"dishName\"\r\n        label=\"菜品名称\"\r\n        width=\"180\"\r\n        align=\"center\">\r\n        <template #default=\"scope\">\r\n          {{ scope.row.dishName || scope.row.dish_name || '未知菜品' }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"price\"\r\n        label=\"价格\"\r\n        width=\"120\"\r\n        align=\"center\">\r\n        <template #default=\"scope\">\r\n          ¥{{ scope.row.price || '0.00' }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"description\"\r\n        label=\"描述\"\r\n        min-width=\"200\"\r\n        show-overflow-tooltip>\r\n        <template #default=\"scope\">\r\n          {{ scope.row.description || '暂无描述' }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"imageUrl\"\r\n        label=\"图片\"\r\n        width=\"200\"\r\n        align=\"center\">\r\n        <template #default=\"scope\">\r\n          <el-image\r\n            :src=\"scope.row.imageUrl || scope.row.image_url || 'https://images.unsplash.com/photo-1567620905732-2d1ec7ab7445?w=200&h=150&fit=crop'\"\r\n            class=\"w-20 h-20\"\r\n            fit=\"cover\"\r\n            :preview-src-list=\"[scope.row.imageUrl || scope.row.image_url || 'https://images.unsplash.com/photo-1567620905732-2d1ec7ab7445?w=200&h=150&fit=crop']\">\r\n            <template #error>\r\n              <div class=\"flex justify-center items-center w-20 h-20 bg-gray-100 text-gray-500 text-xl\">\r\n                <el-icon><Picture /></el-icon>\r\n              </div>\r\n            </template>\r\n          </el-image>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column\r\n        label=\"操作\"\r\n        width=\"150\"\r\n        align=\"center\"\r\n        fixed=\"right\">\r\n        <template #default=\"scope\">\r\n          <el-button size=\"small\" type=\"primary\" @click=\"updateDish(scope.row)\">\r\n            更新\r\n          </el-button>\r\n          <el-button size=\"small\" type=\"danger\" @click=\"deleteDish(scope.row)\">\r\n            删除\r\n          </el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    \r\n    <!-- 无数据提示 -->\r\n    <div v-if=\"!menuData || menuData.length === 0\" class=\"flex justify-center items-center min-h-50\">\r\n      <el-empty description=\"暂无菜品数据\" />\r\n    </div>\r\n\r\n    <!-- 更新菜品对话框 -->\r\n    <el-dialog v-model=\"updateDialogVisible\" title=\"更新菜品\" width=\"500px\" @closed=\"handleDialogClose\">\r\n        <MenuUpdateCard v-if=\"currentDish\" :dish=\"currentDish\" @update-success=\"handleUpdateSuccess\" @close=\"updateDialogVisible = false\" />\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { useMenuStore } from '@/stores/menu'\r\nimport { ElMessage, ElMessageBox } from 'element-plus'\r\nimport { Picture } from '@element-plus/icons-vue'\r\nimport MenuUpdateCard from './MenuUpdateCard.vue'\r\n\r\nexport default {\r\n  name: 'MenuForm',\r\n  components: {\r\n    Picture,\r\n    MenuUpdateCard\r\n  },\r\n  data() {\r\n    return {\r\n      menuData: [],\r\n      updateDialogVisible: false,\r\n      currentDish: null\r\n    }\r\n  },\r\n  mounted() {\r\n    this.getMenuList()\r\n  },\r\n  methods: {\r\n    async getMenuList() {\r\n      try {\r\n        const menuStore = useMenuStore()\r\n        await menuStore.fetchMenuList()\r\n        this.menuData = menuStore.menuList || []\r\n        \r\n        if (this.menuData.length > 0) {\r\n          ElMessage.success(`成功获取 ${this.menuData.length} 个菜品信息`)\r\n        } else {\r\n          ElMessage.warning('暂无菜品数据')\r\n        }\r\n      } catch (error) {\r\n        ElMessage.error('获取菜单失败: ' + (error.message || error))\r\n        console.error('获取菜单失败:', error)\r\n      }\r\n    },\r\n    \r\n    viewDish(dish) {\r\n      ElMessage.info(`查看菜品: ${dish.dishName || dish.dish_name}`)\r\n      console.log('菜品详情:', dish)\r\n    },\r\n    \r\n    async deleteDish(dish) {\r\n      try {\r\n        await ElMessageBox.confirm(\r\n          `确定要删除菜品 \"${dish.dishName || dish.dish_name}\" 吗？`,\r\n          '确认删除',\r\n          {\r\n            confirmButtonText: '确定',\r\n            cancelButtonText: '取消',\r\n            type: 'warning',\r\n          }\r\n        )\r\n        const menuStore = useMenuStore()\r\n        await menuStore.deleteDish(dish.dishId)\r\n        ElMessage.success('删除成功')\r\n        // 重新获取列表\r\n        this.getMenuList()\r\n      } catch (error) {\r\n        if (error !== 'cancel') {\r\n          ElMessage.error('删除失败: ' + error.message)\r\n        }\r\n      }\r\n    },\r\n\r\n    updateDish(dish) {\r\n      this.currentDish = dish\r\n      this.updateDialogVisible = true\r\n      console.log('菜品详情:', dish)\r\n    },\r\n\r\n    handleUpdateSuccess() {\r\n        this.updateDialogVisible = false;\r\n        this.getMenuList();\r\n        ElMessage.success('菜品更新成功');\r\n        this.currentDish = null;\r\n    },\r\n\r\n    handleDialogClose() {\r\n        this.currentDish = null;\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}