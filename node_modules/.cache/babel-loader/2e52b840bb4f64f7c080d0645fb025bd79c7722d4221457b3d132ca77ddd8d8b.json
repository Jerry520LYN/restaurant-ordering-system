{"ast":null,"code":"import { ref, onMounted } from 'vue';\nimport { useTableStore } from '@/stores/table';\nimport { ElMessage, ElMessageBox } from 'element-plus';\nexport default {\n  __name: 'TableManagementView',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const tableStore = useTableStore();\n    const addTableDialog = ref(false);\n    const editTableDialog = ref(false);\n    const addForm = ref({\n      tableStatus: '空',\n      capacity: 4\n    });\n    const editForm = ref({\n      tableId: '',\n      tableStatus: '空',\n      capacity: 4\n    });\n    const handleAddTable = async () => {\n      if (!addForm.value.capacity) {\n        ElMessage.warning('请输入餐桌容量');\n        return;\n      }\n      await tableStore.addTable(addForm.value.tableStatus, addForm.value.capacity);\n      addTableDialog.value = false;\n      addForm.value = {\n        tableStatus: '空',\n        capacity: 4\n      };\n    };\n    const editTable = row => {\n      editForm.value = {\n        ...row\n      };\n      editTableDialog.value = true;\n    };\n    const handleEditTable = async () => {\n      await tableStore.updateTableStatus(editForm.value.tableId, editForm.value.tableStatus);\n      editTableDialog.value = false;\n    };\n    const deleteTable = async row => {\n      await ElMessageBox.confirm(`确定要删除餐桌\"${row.tableId}\"吗？`, '提示', {\n        type: 'warning'\n      });\n      await tableStore.deleteTable(row.tableId);\n    };\n    onMounted(tableStore.fetchTableList);\n    const __returned__ = {\n      tableStore,\n      addTableDialog,\n      editTableDialog,\n      addForm,\n      editForm,\n      handleAddTable,\n      editTable,\n      handleEditTable,\n      deleteTable,\n      ref,\n      onMounted,\n      get useTableStore() {\n        return useTableStore;\n      },\n      get ElMessage() {\n        return ElMessage;\n      },\n      get ElMessageBox() {\n        return ElMessageBox;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","useTableStore","ElMessage","ElMessageBox","tableStore","addTableDialog","editTableDialog","addForm","tableStatus","capacity","editForm","tableId","handleAddTable","value","warning","addTable","editTable","row","handleEditTable","updateTableStatus","deleteTable","confirm","type","fetchTableList"],"sources":["D:/数据库课程设计（饭店系统）/restaurant-ordering-system/src/views/TableManagementView.vue"],"sourcesContent":["<template>\r\n  <div class=\"p-5\">\r\n    <span class=\"flex justify-between items-center mb-5\">\r\n      <h2 class=\"m-0 text-gray-800 text-xl font-bold\">餐桌信息管理</h2>\r\n      <div class=\"flex gap-2\">\r\n        <el-button type=\"primary\" @click=\"tableStore.fetchTableList\">刷新餐桌列表</el-button>\r\n        <el-button type=\"primary\" @click=\"addTableDialog = true\">添加餐桌</el-button>\r\n      </div>\r\n    </span>\r\n    <el-table :data=\"tableStore.tableList\" style=\"width: 100%\" stripe border empty-text=\"暂无餐桌信息\">\r\n      <el-table-column prop=\"tableId\" label=\"餐桌ID\" width=\"120\" align=\"center\" />\r\n      <el-table-column prop=\"tableName\" label=\"餐桌名称\" width=\"160\" align=\"center\" />\r\n      <el-table-column prop=\"tableStatus\" label=\"状态\" width=\"120\" align=\"center\">\r\n        <template #default=\"scope\">\r\n          <el-tag :type=\"scope.row.tableStatus === '空' ? 'success' : 'warning'\">{{ scope.row.tableStatus === '空' ? '空闲' : '占用' }}</el-tag>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"capacity\" label=\"容量\" width=\"100\" align=\"center\" />\r\n      <el-table-column label=\"操作\" width=\"180\" align=\"center\" fixed=\"right\">\r\n        <template #default=\"scope\">\r\n          <el-button type=\"primary\" size=\"small\" @click=\"editTable(scope.row)\">编辑</el-button>\r\n          <el-button type=\"danger\" size=\"small\" @click=\"deleteTable(scope.row)\">删除</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <div v-if=\"!tableStore.tableList || tableStore.tableList.length === 0\" class=\"flex justify-center items-center min-h-50\">\r\n      <el-empty description=\"暂无餐桌数据\" />\r\n    </div>\r\n    <!-- 添加餐桌弹窗 -->\r\n    <el-dialog v-model=\"addTableDialog\" title=\"添加餐桌\" width=\"400px\">\r\n      <el-form :model=\"addForm\" label-width=\"100px\">\r\n        <el-form-item label=\"容量\">\r\n          <el-input-number v-model=\"addForm.capacity\" :min=\"1\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"状态\">\r\n          <el-select v-model=\"addForm.tableStatus\" placeholder=\"请选择状态\">\r\n            <el-option label=\"空闲\" value=\"空\" />\r\n            <el-option label=\"占用\" value=\"占用\" />\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button type=\"primary\" @click=\"handleAddTable\">添加</el-button>\r\n          <el-button @click=\"addTableDialog = false\">取消</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-dialog>\r\n    <!-- 编辑餐桌弹窗 -->\r\n    <el-dialog v-model=\"editTableDialog\" title=\"编辑餐桌\" width=\"400px\">\r\n      <el-form :model=\"editForm\" label-width=\"100px\">\r\n        <el-form-item label=\"容量\">\r\n          <el-input-number v-model=\"editForm.capacity\" :min=\"1\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"状态\">\r\n          <el-select v-model=\"editForm.tableStatus\" placeholder=\"请选择状态\">\r\n            <el-option label=\"空闲\" value=\"空\" />\r\n            <el-option label=\"占用\" value=\"占用\" />\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button type=\"primary\" @click=\"handleEditTable\">保存</el-button>\r\n          <el-button @click=\"editTableDialog = false\">取消</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script setup>\r\nimport { ref, onMounted } from 'vue'\r\nimport { useTableStore } from '@/stores/table'\r\nimport { ElMessage, ElMessageBox } from 'element-plus'\r\n\r\nconst tableStore = useTableStore()\r\nconst addTableDialog = ref(false)\r\nconst editTableDialog = ref(false)\r\nconst addForm = ref({ tableStatus: '空', capacity: 4 })\r\nconst editForm = ref({ tableId: '', tableStatus: '空', capacity: 4 })\r\n\r\nconst handleAddTable = async () => {\r\n  if (!addForm.value.capacity) {\r\n    ElMessage.warning('请输入餐桌容量')\r\n    return\r\n  }\r\n  await tableStore.addTable(addForm.value.tableStatus, addForm.value.capacity)\r\n  addTableDialog.value = false\r\n  addForm.value = { tableStatus: '空', capacity: 4 }\r\n}\r\nconst editTable = (row) => {\r\n  editForm.value = { ...row }\r\n  editTableDialog.value = true\r\n}\r\nconst handleEditTable = async () => {\r\n  await tableStore.updateTableStatus(editForm.value.tableId, editForm.value.tableStatus)\r\n  editTableDialog.value = false\r\n}\r\nconst deleteTable = async (row) => {\r\n  await ElMessageBox.confirm(`确定要删除餐桌\"${row.tableId}\"吗？`, '提示', { type: 'warning' })\r\n  await tableStore.deleteTable(row.tableId)\r\n}\r\nonMounted(tableStore.fetchTableList)\r\n</script>\r\n"],"mappings":"AAmEA,SAASA,GAAG,EAAEC,SAAS,QAAQ,KAAK;AACpC,SAASC,aAAa,QAAQ,gBAAgB;AAC9C,SAASC,SAAS,EAAEC,YAAY,QAAQ,cAAc;;;;;;;IAEtD,MAAMC,UAAU,GAAGH,aAAa,CAAC,CAAC;IAClC,MAAMI,cAAc,GAAGN,GAAG,CAAC,KAAK,CAAC;IACjC,MAAMO,eAAe,GAAGP,GAAG,CAAC,KAAK,CAAC;IAClC,MAAMQ,OAAO,GAAGR,GAAG,CAAC;MAAES,WAAW,EAAE,GAAG;MAAEC,QAAQ,EAAE;IAAE,CAAC,CAAC;IACtD,MAAMC,QAAQ,GAAGX,GAAG,CAAC;MAAEY,OAAO,EAAE,EAAE;MAAEH,WAAW,EAAE,GAAG;MAAEC,QAAQ,EAAE;IAAE,CAAC,CAAC;IAEpE,MAAMG,cAAc,GAAG,MAAAA,CAAA,KAAY;MACjC,IAAI,CAACL,OAAO,CAACM,KAAK,CAACJ,QAAQ,EAAE;QAC3BP,SAAS,CAACY,OAAO,CAAC,SAAS,CAAC;QAC5B;MACF;MACA,MAAMV,UAAU,CAACW,QAAQ,CAACR,OAAO,CAACM,KAAK,CAACL,WAAW,EAAED,OAAO,CAACM,KAAK,CAACJ,QAAQ,CAAC;MAC5EJ,cAAc,CAACQ,KAAK,GAAG,KAAK;MAC5BN,OAAO,CAACM,KAAK,GAAG;QAAEL,WAAW,EAAE,GAAG;QAAEC,QAAQ,EAAE;MAAE,CAAC;IACnD,CAAC;IACD,MAAMO,SAAS,GAAIC,GAAG,IAAK;MACzBP,QAAQ,CAACG,KAAK,GAAG;QAAE,GAAGI;MAAI,CAAC;MAC3BX,eAAe,CAACO,KAAK,GAAG,IAAI;IAC9B,CAAC;IACD,MAAMK,eAAe,GAAG,MAAAA,CAAA,KAAY;MAClC,MAAMd,UAAU,CAACe,iBAAiB,CAACT,QAAQ,CAACG,KAAK,CAACF,OAAO,EAAED,QAAQ,CAACG,KAAK,CAACL,WAAW,CAAC;MACtFF,eAAe,CAACO,KAAK,GAAG,KAAK;IAC/B,CAAC;IACD,MAAMO,WAAW,GAAG,MAAOH,GAAG,IAAK;MACjC,MAAMd,YAAY,CAACkB,OAAO,CAAC,WAAWJ,GAAG,CAACN,OAAO,KAAK,EAAE,IAAI,EAAE;QAAEW,IAAI,EAAE;MAAU,CAAC,CAAC;MAClF,MAAMlB,UAAU,CAACgB,WAAW,CAACH,GAAG,CAACN,OAAO,CAAC;IAC3C,CAAC;IACDX,SAAS,CAACI,UAAU,CAACmB,cAAc,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}