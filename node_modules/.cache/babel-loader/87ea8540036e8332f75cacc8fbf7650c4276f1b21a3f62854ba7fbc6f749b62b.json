{"ast":null,"code":"import { onMounted, computed } from 'vue';\nimport { useCallingNumberStore } from '@/stores/callingNumber';\nimport { ElMessage } from 'element-plus';\nexport default {\n  __name: 'CallingnumberForm',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const callingNumberStore = useCallingNumberStore();\n    const diningQueueData = computed(() => {\n      return [...(callingNumberStore.queues.diningQueue2 || []), ...(callingNumberStore.queues.diningQueue4 || []), ...(callingNumberStore.queues.diningQueue8 || []), ...(callingNumberStore.queues.waitingQueue2 || []), ...(callingNumberStore.queues.waitingQueue4 || []), ...(callingNumberStore.queues.waitingQueue8 || [])].filter(item => item.status === 'DINING');\n    });\n    onMounted(async () => {\n      try {\n        await callingNumberStore.getQueues();\n        ElMessage.success('刷新成功');\n      } catch (error) {\n        console.error('Failed to load queues:', error);\n      }\n    });\n    const finishDining = row => {\n      callingNumberStore.removeCallingNumber(row.callingNumberId);\n      ElMessage.success('就餐完毕');\n    };\n    const __returned__ = {\n      callingNumberStore,\n      diningQueueData,\n      finishDining,\n      onMounted,\n      computed,\n      get useCallingNumberStore() {\n        return useCallingNumberStore;\n      },\n      get ElMessage() {\n        return ElMessage;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["onMounted","computed","useCallingNumberStore","ElMessage","callingNumberStore","diningQueueData","queues","diningQueue2","diningQueue4","diningQueue8","waitingQueue2","waitingQueue4","waitingQueue8","filter","item","status","getQueues","success","error","console","finishDining","row","removeCallingNumber","callingNumberId"],"sources":["D:/数据库课程设计（饭店系统）/restaurant-ordering-system/src/components/callingnumber/CallingnumberForm.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <el-divider >可用餐队列</el-divider>\r\n        <el-table :data=\"diningQueueData\" style=\"width: 100%\" border>\r\n            <el-table-column prop=\"callingNumberId\" label=\"Calling Number ID\"></el-table-column>\r\n            <el-table-column prop=\"waitingCount\" label=\"Waiting Count\"></el-table-column>\r\n            <el-table-column prop=\"diningCount\" label=\"Dining Count\"></el-table-column>\r\n            <el-table-column prop=\"status\" label=\"Status\"></el-table-column>\r\n            <el-table-column prop=\"phone\" label=\"Phone\"></el-table-column>\r\n            <el-table-column prop=\"action\" label=\"Action\">\r\n                <template #default=\"scope\">\r\n                    <el-button type=\"primary\" @click=\"finishDining(scope.row)\">就餐完毕</el-button>\r\n                </template>\r\n            </el-table-column>\r\n        </el-table>\r\n    </div>\r\n</template>\r\n<script setup>\r\nimport { onMounted, computed } from 'vue';\r\nimport { useCallingNumberStore } from '@/stores/callingNumber';\r\nimport { ElMessage } from 'element-plus';\r\n\r\nconst callingNumberStore = useCallingNumberStore(); \r\n\r\nconst diningQueueData = computed(() => {\r\n    return [\r\n        ...(callingNumberStore.queues.diningQueue2 || []),\r\n        ...(callingNumberStore.queues.diningQueue4 || []),\r\n        ...(callingNumberStore.queues.diningQueue8 || []),\r\n        ...(callingNumberStore.queues.waitingQueue2 || []),\r\n        ...(callingNumberStore.queues.waitingQueue4 || []),\r\n        ...(callingNumberStore.queues.waitingQueue8 || [])\r\n    ].filter(item => item.status === 'DINING');\r\n});\r\n\r\n\r\n\r\n\r\nonMounted(async () => {\r\n    try {\r\n        await callingNumberStore.getQueues();\r\n        ElMessage.success('刷新成功');\r\n    } catch (error) {\r\n        console.error('Failed to load queues:', error);\r\n    }\r\n});\r\n\r\nconst finishDining = (row) => {\r\n    callingNumberStore.removeCallingNumber(row.callingNumberId);\r\n    ElMessage.success('就餐完毕');\r\n}\r\n\r\n\r\n</script>"],"mappings":"AAkBA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,KAAK;AACzC,SAASC,qBAAqB,QAAQ,wBAAwB;AAC9D,SAASC,SAAS,QAAQ,cAAc;;;;;;;IAExC,MAAMC,kBAAkB,GAAGF,qBAAqB,CAAC,CAAC;IAElD,MAAMG,eAAe,GAAGJ,QAAQ,CAAC,MAAM;MACnC,OAAO,CACH,IAAIG,kBAAkB,CAACE,MAAM,CAACC,YAAY,IAAI,EAAE,CAAC,EACjD,IAAIH,kBAAkB,CAACE,MAAM,CAACE,YAAY,IAAI,EAAE,CAAC,EACjD,IAAIJ,kBAAkB,CAACE,MAAM,CAACG,YAAY,IAAI,EAAE,CAAC,EACjD,IAAIL,kBAAkB,CAACE,MAAM,CAACI,aAAa,IAAI,EAAE,CAAC,EAClD,IAAIN,kBAAkB,CAACE,MAAM,CAACK,aAAa,IAAI,EAAE,CAAC,EAClD,IAAIP,kBAAkB,CAACE,MAAM,CAACM,aAAa,IAAI,EAAE,CAAC,CACrD,CAACC,MAAM,CAACC,IAAI,IAAIA,IAAI,CAACC,MAAM,KAAK,QAAQ,CAAC;IAC9C,CAAC,CAAC;IAKFf,SAAS,CAAC,YAAY;MAClB,IAAI;QACA,MAAMI,kBAAkB,CAACY,SAAS,CAAC,CAAC;QACpCb,SAAS,CAACc,OAAO,CAAC,MAAM,CAAC;MAC7B,CAAC,CAAC,OAAOC,KAAK,EAAE;QACZC,OAAO,CAACD,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;MAClD;IACJ,CAAC,CAAC;IAEF,MAAME,YAAY,GAAIC,GAAG,IAAK;MAC1BjB,kBAAkB,CAACkB,mBAAmB,CAACD,GAAG,CAACE,eAAe,CAAC;MAC3DpB,SAAS,CAACc,OAAO,CAAC,MAAM,CAAC;IAC7B,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}