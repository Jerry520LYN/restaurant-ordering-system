{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref } from 'vue';\nimport { useAuthStore } from '@/stores/auth';\nimport { useRouter } from 'vue-router';\nimport { ElMessage } from 'element-plus';\nimport UserLoginForm from './UserLoginForm.vue';\nexport default {\n  __name: 'LoginForm',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const authStore = useAuthStore();\n    const router = useRouter();\n    const form = ref({\n      username: '',\n      password: ''\n    });\n    const error = ref(null);\n    const userLoginDialogVisible = ref(false);\n    const handleSubmit = async () => {\n      error.value = null;\n      try {\n        const result = await authStore.login(form.value);\n        if (result) {\n          ElMessage.success(\"登录成功\");\n          router.push('/dashboard');\n        } else {\n          ElMessage.error(\"登录失败,请检查账号或者密码\");\n        }\n      } catch (err) {\n        error.value = err;\n      }\n    };\n    const showUserLogin = () => {\n      userLoginDialogVisible.value = true;\n    };\n    const goRegister = () => {\n      router.push('/register');\n    };\n    const __returned__ = {\n      authStore,\n      router,\n      form,\n      error,\n      userLoginDialogVisible,\n      handleSubmit,\n      showUserLogin,\n      goRegister,\n      ref,\n      get useAuthStore() {\n        return useAuthStore;\n      },\n      get useRouter() {\n        return useRouter;\n      },\n      get ElMessage() {\n        return ElMessage;\n      },\n      UserLoginForm\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","useAuthStore","useRouter","ElMessage","UserLoginForm","authStore","router","form","username","password","error","userLoginDialogVisible","handleSubmit","value","result","login","success","push","err","showUserLogin","goRegister"],"sources":["D:/数据库课程设计（饭店系统）/restaurant-ordering-system/src/components/auth/LoginForm.vue"],"sourcesContent":["<template>\r\n  <form @submit.prevent=\"handleSubmit\">\r\n    <div class=\"mb-4\">\r\n      <label for=\"username\" class=\"block mb-2\">用户名</label>\r\n      <input\r\n        id=\"username\"\r\n        v-model=\"form.username\"\r\n        type=\"text\"\r\n        required\r\n        placeholder=\"请输入用户名\"\r\n        class=\"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n      />\r\n    </div>\r\n\r\n    <div class=\"mb-4\">\r\n      <label for=\"password\" class=\"block mb-2\">密码</label>\r\n      <input\r\n        id=\"password\"\r\n        v-model=\"form.password\"\r\n        type=\"password\"\r\n        required\r\n        placeholder=\"请输入密码\"\r\n        class=\"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n      />\r\n    </div>\r\n\r\n    <div v-if=\"error\" class=\"text-red-500 mb-4\">\r\n      {{ error }}\r\n    </div>\r\n\r\n    <div class=\"flex justify-center gap-4\">\r\n      <button \r\n        type=\"submit\" \r\n        class=\"bg-green-500 hover:bg-green-600 disabled:bg-gray-400 disabled:cursor-not-allowed text-white px-4 py-2 rounded-md cursor-pointer\"\r\n      >\r\n        管理员登录\r\n      </button>\r\n\r\n      <button \r\n        type=\"button\" \r\n        @click=\"showUserLogin\"\r\n        class=\"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md cursor-pointer\"\r\n      >\r\n        用户登录\r\n      </button>\r\n\r\n      <button \r\n        type=\"button\" \r\n        @click=\"goRegister\"\r\n        class=\"bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded-md cursor-pointer\"\r\n      >\r\n        注册\r\n      </button>\r\n    </div>\r\n  </form>\r\n\r\n  <!-- 用户登录对话框 -->\r\n  <el-dialog\r\n    v-model=\"userLoginDialogVisible\"\r\n    title=\"用户登录\"\r\n    width=\"400px\"\r\n    :close-on-click-modal=\"false\"\r\n  >\r\n    <UserLoginForm />\r\n  </el-dialog>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from 'vue'\r\nimport { useAuthStore } from '@/stores/auth'\r\nimport { useRouter } from 'vue-router'\r\nimport { ElMessage } from 'element-plus'\r\nimport UserLoginForm from './UserLoginForm.vue'\r\n\r\nconst authStore = useAuthStore()\r\nconst router = useRouter()\r\n\r\nconst form = ref({\r\n  username: '',\r\n  password: ''\r\n})\r\n\r\nconst error = ref(null)\r\nconst userLoginDialogVisible = ref(false)\r\n\r\nconst handleSubmit = async () => {\r\n  error.value = null\r\n  try{\r\n    const result = await authStore.login(form.value);\r\n    if(result){\r\n    ElMessage.success(\"登录成功\");\r\n    router.push('/dashboard');\r\n    }else{\r\n      ElMessage.error(\"登录失败,请检查账号或者密码\");\r\n    }\r\n  }catch(err){\r\n    error.value = err;\r\n  }\r\n}\r\n\r\nconst showUserLogin = () => {\r\n  userLoginDialogVisible.value = true\r\n}\r\n\r\nconst goRegister = () => {\r\n  router.push('/register')\r\n}\r\n</script>"],"mappings":";AAoEA,SAASA,GAAG,QAAQ,KAAK;AACzB,SAASC,YAAY,QAAQ,eAAe;AAC5C,SAASC,SAAS,QAAQ,YAAY;AACtC,SAASC,SAAS,QAAQ,cAAc;AACxC,OAAOC,aAAa,MAAM,qBAAqB;;;;;;;IAE/C,MAAMC,SAAS,GAAGJ,YAAY,CAAC,CAAC;IAChC,MAAMK,MAAM,GAAGJ,SAAS,CAAC,CAAC;IAE1B,MAAMK,IAAI,GAAGP,GAAG,CAAC;MACfQ,QAAQ,EAAE,EAAE;MACZC,QAAQ,EAAE;IACZ,CAAC,CAAC;IAEF,MAAMC,KAAK,GAAGV,GAAG,CAAC,IAAI,CAAC;IACvB,MAAMW,sBAAsB,GAAGX,GAAG,CAAC,KAAK,CAAC;IAEzC,MAAMY,YAAY,GAAG,MAAAA,CAAA,KAAY;MAC/BF,KAAK,CAACG,KAAK,GAAG,IAAI;MAClB,IAAG;QACD,MAAMC,MAAM,GAAG,MAAMT,SAAS,CAACU,KAAK,CAACR,IAAI,CAACM,KAAK,CAAC;QAChD,IAAGC,MAAM,EAAC;UACVX,SAAS,CAACa,OAAO,CAAC,MAAM,CAAC;UACzBV,MAAM,CAACW,IAAI,CAAC,YAAY,CAAC;QACzB,CAAC,MAAI;UACHd,SAAS,CAACO,KAAK,CAAC,gBAAgB,CAAC;QACnC;MACF,CAAC,QAAMQ,GAAG,EAAC;QACTR,KAAK,CAACG,KAAK,GAAGK,GAAG;MACnB;IACF,CAAC;IAED,MAAMC,aAAa,GAAGA,CAAA,KAAM;MAC1BR,sBAAsB,CAACE,KAAK,GAAG,IAAI;IACrC,CAAC;IAED,MAAMO,UAAU,GAAGA,CAAA,KAAM;MACvBd,MAAM,CAACW,IAAI,CAAC,WAAW,CAAC;IAC1B,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}