{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, computed } from 'vue';\nimport { useRouter, useRoute } from 'vue-router';\nimport { useAuthStore } from '@/stores/auth';\nimport { HomeFilled, Document, Menu as MenuIcon, UserFilled, Setting, ArrowDown, User, SwitchButton, Expand, Fold } from '@element-plus/icons-vue';\nconst defaultAvatar = 'https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png';\n\n// 菜单折叠状态\n\nexport default {\n  __name: 'LoginForm',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const authStore = useAuthStore();\n    const router = useRouter();\n    const route = useRoute();\n\n    // 检查logo是否存在\n    const logoExists = ref(false);\n    try {\n      require('@/assets/logo.png');\n      logoExists.value = true;\n    } catch {\n      logoExists.value = false;\n    }\n    const isCollapse = ref(false);\n    const toggleCollapse = () => {\n      isCollapse.value = !isCollapse.value;\n    };\n\n    // 当前激活菜单\n    const activeMenu = computed(() => {\n      const {\n        path\n      } = route;\n      return path;\n    });\n\n    // 当前路由名称\n    const currentRouteName = computed(() => {\n      return route.meta.title || route.name;\n    });\n    const handleDropdown = command => {\n      if (command === 'logout') {\n        authStore.logout();\n        router.push('/login');\n      } else if (command === 'profile') {\n        router.push('/dashboard/profile');\n      }\n    };\n    const __returned__ = {\n      authStore,\n      router,\n      route,\n      logoExists,\n      defaultAvatar,\n      isCollapse,\n      toggleCollapse,\n      activeMenu,\n      currentRouteName,\n      handleDropdown,\n      ref,\n      computed,\n      get useRouter() {\n        return useRouter;\n      },\n      get useRoute() {\n        return useRoute;\n      },\n      get useAuthStore() {\n        return useAuthStore;\n      },\n      get HomeFilled() {\n        return HomeFilled;\n      },\n      get Document() {\n        return Document;\n      },\n      get MenuIcon() {\n        return MenuIcon;\n      },\n      get UserFilled() {\n        return UserFilled;\n      },\n      get Setting() {\n        return Setting;\n      },\n      get ArrowDown() {\n        return ArrowDown;\n      },\n      get User() {\n        return User;\n      },\n      get SwitchButton() {\n        return SwitchButton;\n      },\n      get Expand() {\n        return Expand;\n      },\n      get Fold() {\n        return Fold;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","useRouter","useRoute","useAuthStore","HomeFilled","Document","Menu","MenuIcon","UserFilled","Setting","ArrowDown","User","SwitchButton","Expand","Fold","defaultAvatar","authStore","router","route","logoExists","require","value","isCollapse","toggleCollapse","activeMenu","path","currentRouteName","meta","title","name","handleDropdown","command","logout","push"],"sources":["D:/数据库课程设计（饭店系统）/restaurant-ordering-system/src/components/auth/LoginForm.vue"],"sourcesContent":["<template>\r\n  <div class=\"common-layout\">\r\n    <el-container>\r\n      <!-- 顶部 Header -->\r\n      <el-header class=\"topbar\">\r\n        <div class=\"header-container\">\r\n          <div class=\"header-left\">\r\n            <div class=\"logo\">\r\n              <img src=\"@/assets/logo.png\" alt=\"餐厅logo\" v-if=\"logoExists\" />\r\n              <span class=\"header-title\">餐厅点餐系统</span>\r\n            </div>\r\n            <el-breadcrumb separator=\"/\" class=\"breadcrumb\">\r\n              <el-breadcrumb-item :to=\"{ path: '/' }\">首页</el-breadcrumb-item>\r\n              <el-breadcrumb-item>{{ currentRouteName }}</el-breadcrumb-item>\r\n            </el-breadcrumb>\r\n          </div>\r\n          <div class=\"header-right\">\r\n            <el-dropdown @command=\"handleDropdown\" trigger=\"click\">\r\n              <div class=\"user-info\">\r\n                <el-avatar :size=\"32\" :src=\"authStore.user?.avatar || defaultAvatar\" />\r\n                <span class=\"username\">{{ authStore.user?.username || '管理员' }}</span>\r\n                <el-icon><arrow-down /></el-icon>\r\n              </div>\r\n              <template #dropdown>\r\n                <el-dropdown-menu>\r\n                  <el-dropdown-item command=\"profile\">\r\n                    <el-icon><user /></el-icon>个人中心\r\n                  </el-dropdown-item>\r\n                  <el-dropdown-item command=\"logout\" divided>\r\n                    <el-icon><switch-button /></el-icon>退出登录\r\n                  </el-dropdown-item>\r\n                </el-dropdown-menu>\r\n              </template>\r\n            </el-dropdown>\r\n          </div>\r\n        </div>\r\n      </el-header>\r\n\r\n      <!-- 主体容器 -->\r\n      <el-container>\r\n        <!-- 左侧菜单栏 -->\r\n        <el-aside width=\"220px\" class=\"sidebar\">\r\n          <el-menu\r\n            :default-active=\"activeMenu\"\r\n            router\r\n            background-color=\"#001529\"\r\n            text-color=\"#bfcbd9\"\r\n            active-text-color=\"#409EFF\"\r\n            :collapse=\"isCollapse\"\r\n            :unique-opened=\"true\"\r\n          >\r\n            <el-menu-item index=\"/dashboard\">\r\n              <el-icon><home-filled /></el-icon>\r\n              <template #title>首页</template>\r\n            </el-menu-item>\r\n            \r\n            <el-sub-menu index=\"order-management\">\r\n              <template #title>\r\n                <el-icon><document /></el-icon>\r\n                <span>订单管理</span>\r\n              </template>\r\n              <el-menu-item index=\"/dashboard/orders\">所有订单</el-menu-item>\r\n              <el-menu-item index=\"/dashboard/orders/new\">新建订单</el-menu-item>\r\n            </el-sub-menu>\r\n            \r\n            <el-sub-menu index=\"menu-management\">\r\n              <template #title>\r\n                <el-icon><menu /></el-icon>\r\n                <span>菜品管理</span>\r\n              </template>\r\n              <el-menu-item index=\"/dashboard/menu\">菜品列表</el-menu-item>\r\n              <el-menu-item index=\"/dashboard/menu/categories\">分类管理</el-menu-item>\r\n            </el-sub-menu>\r\n            \r\n            <el-menu-item index=\"/dashboard/users\">\r\n              <el-icon><user-filled /></el-icon>\r\n              <template #title>用户管理</template>\r\n            </el-menu-item>\r\n            \r\n            <el-menu-item index=\"/dashboard/settings\">\r\n              <el-icon><setting /></el-icon>\r\n              <template #title>系统设置</template>\r\n            </el-menu-item>\r\n          </el-menu>\r\n          <div class=\"collapse-btn\" @click=\"toggleCollapse\">\r\n            <el-icon>\r\n              <component :is=\"isCollapse ? 'expand' : 'fold'\" />\r\n            </el-icon>\r\n          </div>\r\n        </el-aside>\r\n\r\n        <!-- 右侧内容区域 -->\r\n        <el-main class=\"content\">\r\n          <div class=\"content-container\">\r\n            <router-view v-slot=\"{ Component }\">\r\n              <transition name=\"fade-transform\" mode=\"out-in\">\r\n                <component :is=\"Component\" />\r\n              </transition>\r\n            </router-view>\r\n          </div>\r\n        </el-main>\r\n      </el-container>\r\n    </el-container>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed } from 'vue'\r\nimport { useRouter, useRoute } from 'vue-router'\r\nimport { useAuthStore } from '@/stores/auth'\r\nimport {\r\n  HomeFilled,\r\n  Document,\r\n  Menu as MenuIcon,\r\n  UserFilled,\r\n  Setting,\r\n  ArrowDown,\r\n  User,\r\n  SwitchButton,\r\n  Expand,\r\n  Fold\r\n} from '@element-plus/icons-vue'\r\n\r\nconst authStore = useAuthStore()\r\nconst router = useRouter()\r\nconst route = useRoute()\r\n\r\n// 检查logo是否存在\r\nconst logoExists = ref(false)\r\ntry {\r\n  require('@/assets/logo.png')\r\n  logoExists.value = true\r\n} catch {\r\n  logoExists.value = false\r\n}\r\n\r\nconst defaultAvatar = 'https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png'\r\n\r\n// 菜单折叠状态\r\nconst isCollapse = ref(false)\r\nconst toggleCollapse = () => {\r\n  isCollapse.value = !isCollapse.value\r\n}\r\n\r\n// 当前激活菜单\r\nconst activeMenu = computed(() => {\r\n  const { path } = route\r\n  return path\r\n})\r\n\r\n// 当前路由名称\r\nconst currentRouteName = computed(() => {\r\n  return route.meta.title || route.name\r\n})\r\n\r\nconst handleDropdown = (command) => {\r\n  if (command === 'logout') {\r\n    authStore.logout()\r\n    router.push('/login')\r\n  } else if (command === 'profile') {\r\n    router.push('/dashboard/profile')\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.common-layout {\r\n  height: 100vh;\r\n  overflow: hidden;\r\n  \r\n  .topbar {\r\n    height: 60px;\r\n    padding: 0;\r\n    background-color: #fff;\r\n    box-shadow: 0 1px 4px rgba(0, 21, 41, 0.08);\r\n    z-index: 1000;\r\n    \r\n    .header-container {\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n      height: 100%;\r\n      padding: 0 20px;\r\n      \r\n      .header-left {\r\n        display: flex;\r\n        align-items: center;\r\n        \r\n        .logo {\r\n          display: flex;\r\n          align-items: center;\r\n          margin-right: 20px;\r\n          \r\n          img {\r\n            width: 32px;\r\n            height: 32px;\r\n            margin-right: 10px;\r\n          }\r\n          \r\n          .header-title {\r\n            font-size: 18px;\r\n            font-weight: bold;\r\n            color: #333;\r\n          }\r\n        }\r\n        \r\n        .breadcrumb {\r\n          font-size: 14px;\r\n        }\r\n      }\r\n      \r\n      .header-right {\r\n        .user-info {\r\n          display: flex;\r\n          align-items: center;\r\n          cursor: pointer;\r\n          \r\n          .username {\r\n            margin: 0 8px;\r\n            font-size: 14px;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  \r\n  .sidebar {\r\n    background-color: #001529;\r\n    transition: width 0.3s;\r\n    position: relative;\r\n    \r\n    .el-menu {\r\n      border-right: none;\r\n      height: calc(100vh - 60px);\r\n    }\r\n    \r\n    .collapse-btn {\r\n      position: absolute;\r\n      bottom: 0;\r\n      left: 0;\r\n      width: 100%;\r\n      height: 40px;\r\n      line-height: 40px;\r\n      text-align: center;\r\n      color: #fff;\r\n      background-color: #001529;\r\n      cursor: pointer;\r\n      transition: all 0.3s;\r\n      \r\n      &:hover {\r\n        background-color: #00284d;\r\n      }\r\n      \r\n      .el-icon {\r\n        font-size: 16px;\r\n      }\r\n    }\r\n  }\r\n  \r\n  .content {\r\n    padding: 15px;\r\n    background-color: #f0f2f5;\r\n    height: calc(100vh - 60px);\r\n    overflow: auto;\r\n    \r\n    .content-container {\r\n      background-color: #fff;\r\n      border-radius: 4px;\r\n      padding: 20px;\r\n      min-height: calc(100% - 40px);\r\n    }\r\n  }\r\n}\r\n\r\n// 过渡动画\r\n.fade-transform-leave-active,\r\n.fade-transform-enter-active {\r\n  transition: all 0.3s;\r\n}\r\n\r\n.fade-transform-enter-from {\r\n  opacity: 0;\r\n  transform: translateX(-30px);\r\n}\r\n\r\n.fade-transform-leave-to {\r\n  opacity: 0;\r\n  transform: translateX(30px);\r\n}\r\n</style>"],"mappings":";AA2GA,SAASA,GAAG,EAAEC,QAAQ,QAAQ,KAAK;AACnC,SAASC,SAAS,EAAEC,QAAQ,QAAQ,YAAY;AAChD,SAASC,YAAY,QAAQ,eAAe;AAC5C,SACEC,UAAU,EACVC,QAAQ,EACRC,IAAI,IAAIC,QAAQ,EAChBC,UAAU,EACVC,OAAO,EACPC,SAAS,EACTC,IAAI,EACJC,YAAY,EACZC,MAAM,EACNC,IAAI,QACC,yBAAyB;AAehC,MAAMC,aAAa,GAAG,qEAAqE;;AAE3F;;;;;;;;IAfA,MAAMC,SAAS,GAAGb,YAAY,CAAC,CAAC;IAChC,MAAMc,MAAM,GAAGhB,SAAS,CAAC,CAAC;IAC1B,MAAMiB,KAAK,GAAGhB,QAAQ,CAAC,CAAC;;IAExB;IACA,MAAMiB,UAAU,GAAGpB,GAAG,CAAC,KAAK,CAAC;IAC7B,IAAI;MACFqB,OAAO,CAAC,mBAAmB,CAAC;MAC5BD,UAAU,CAACE,KAAK,GAAG,IAAI;IACzB,CAAC,CAAC,MAAM;MACNF,UAAU,CAACE,KAAK,GAAG,KAAK;IAC1B;IAKA,MAAMC,UAAU,GAAGvB,GAAG,CAAC,KAAK,CAAC;IAC7B,MAAMwB,cAAc,GAAGA,CAAA,KAAM;MAC3BD,UAAU,CAACD,KAAK,GAAG,CAACC,UAAU,CAACD,KAAK;IACtC,CAAC;;IAED;IACA,MAAMG,UAAU,GAAGxB,QAAQ,CAAC,MAAM;MAChC,MAAM;QAAEyB;MAAK,CAAC,GAAGP,KAAK;MACtB,OAAOO,IAAI;IACb,CAAC,CAAC;;IAEF;IACA,MAAMC,gBAAgB,GAAG1B,QAAQ,CAAC,MAAM;MACtC,OAAOkB,KAAK,CAACS,IAAI,CAACC,KAAK,IAAIV,KAAK,CAACW,IAAI;IACvC,CAAC,CAAC;IAEF,MAAMC,cAAc,GAAIC,OAAO,IAAK;MAClC,IAAIA,OAAO,KAAK,QAAQ,EAAE;QACxBf,SAAS,CAACgB,MAAM,CAAC,CAAC;QAClBf,MAAM,CAACgB,IAAI,CAAC,QAAQ,CAAC;MACvB,CAAC,MAAM,IAAIF,OAAO,KAAK,SAAS,EAAE;QAChCd,MAAM,CAACgB,IAAI,CAAC,oBAAoB,CAAC;MACnC;IACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}