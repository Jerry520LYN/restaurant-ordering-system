{"ast":null,"code":"import { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"p-5\"\n};\nconst _hoisted_2 = {\n  class: \"flex justify-between items-center mb-5\"\n};\nconst _hoisted_3 = {\n  class: \"flex justify-center items-center w-20 h-20 bg-gray-100 text-gray-500 text-xl\"\n};\nconst _hoisted_4 = {\n  key: 0,\n  class: \"flex justify-center items-center min-h-50\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_table_column = _resolveComponent(\"el-table-column\");\n  const _component_Picture = _resolveComponent(\"Picture\");\n  const _component_el_icon = _resolveComponent(\"el-icon\");\n  const _component_el_image = _resolveComponent(\"el-image\");\n  const _component_el_table = _resolveComponent(\"el-table\");\n  const _component_el_empty = _resolveComponent(\"el-empty\");\n  const _component_MenuUpdateCard = _resolveComponent(\"MenuUpdateCard\");\n  const _component_el_dialog = _resolveComponent(\"el-dialog\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_cache[4] || (_cache[4] = _createElementVNode(\"h2\", {\n    class: \"m-0 text-gray-800 text-xl font-bold\"\n  }, \"全部菜品信息\", -1 /* HOISTED */)), _createVNode(_component_el_button, {\n    type: \"primary\",\n    onClick: $options.getMenuList\n  }, {\n    default: _withCtx(() => _cache[2] || (_cache[2] = [_createTextVNode(\" 刷新菜品列表 \")])),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"onClick\"]), _createVNode(_component_el_button, {\n    type: \"primary\",\n    onClick: _ctx.addDish\n  }, {\n    default: _withCtx(() => _cache[3] || (_cache[3] = [_createTextVNode(\" 添加菜品 \")])),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"onClick\"])]), _createVNode(_component_el_table, {\n    data: $data.menuData,\n    style: {\n      \"width\": \"100%\"\n    },\n    stripe: \"\",\n    border: \"\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_table_column, {\n      prop: \"dishId\",\n      label: \"菜品ID\",\n      width: \"120\",\n      align: \"center\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"dishName\",\n      label: \"菜品名称\",\n      width: \"180\",\n      align: \"center\"\n    }, {\n      default: _withCtx(scope => [_createTextVNode(_toDisplayString(scope.row.dishName || scope.row.dish_name || '未知菜品'), 1 /* TEXT */)]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_table_column, {\n      prop: \"price\",\n      label: \"价格\",\n      width: \"120\",\n      align: \"center\"\n    }, {\n      default: _withCtx(scope => [_createTextVNode(\" ¥\" + _toDisplayString(scope.row.price || '0.00'), 1 /* TEXT */)]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_table_column, {\n      prop: \"description\",\n      label: \"描述\",\n      \"min-width\": \"200\",\n      \"show-overflow-tooltip\": \"\"\n    }, {\n      default: _withCtx(scope => [_createTextVNode(_toDisplayString(scope.row.description || '暂无描述'), 1 /* TEXT */)]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_table_column, {\n      prop: \"imageUrl\",\n      label: \"图片\",\n      width: \"200\",\n      align: \"center\"\n    }, {\n      default: _withCtx(scope => [_createVNode(_component_el_image, {\n        src: scope.row.imageUrl || scope.row.image_url || 'https://images.unsplash.com/photo-1567620905732-2d1ec7ab7445?w=200&h=150&fit=crop',\n        class: \"w-20 h-20\",\n        fit: \"cover\",\n        \"preview-src-list\": [scope.row.imageUrl || scope.row.image_url || 'https://images.unsplash.com/photo-1567620905732-2d1ec7ab7445?w=200&h=150&fit=crop']\n      }, {\n        error: _withCtx(() => [_createElementVNode(\"div\", _hoisted_3, [_createVNode(_component_el_icon, null, {\n          default: _withCtx(() => [_createVNode(_component_Picture)]),\n          _: 1 /* STABLE */\n        })])]),\n        _: 2 /* DYNAMIC */\n      }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"src\", \"preview-src-list\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_table_column, {\n      label: \"操作\",\n      width: \"150\",\n      align: \"center\",\n      fixed: \"right\"\n    }, {\n      default: _withCtx(scope => [_createVNode(_component_el_button, {\n        size: \"small\",\n        type: \"primary\",\n        onClick: $event => $options.updateDish(scope.row)\n      }, {\n        default: _withCtx(() => _cache[5] || (_cache[5] = [_createTextVNode(\" 更新 \")])),\n        _: 2 /* DYNAMIC */\n      }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"]), _createVNode(_component_el_button, {\n        size: \"small\",\n        type: \"danger\",\n        onClick: $event => $options.deleteDish(scope.row)\n      }, {\n        default: _withCtx(() => _cache[6] || (_cache[6] = [_createTextVNode(\" 删除 \")])),\n        _: 2 /* DYNAMIC */\n      }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"])]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"data\"]), _createCommentVNode(\" 无数据提示 \"), !$data.menuData || $data.menuData.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [_createVNode(_component_el_empty, {\n    description: \"暂无菜品数据\"\n  })])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" 更新菜品对话框 \"), _createVNode(_component_el_dialog, {\n    modelValue: $data.updateDialogVisible,\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.updateDialogVisible = $event),\n    title: \"更新菜品\",\n    width: \"500px\",\n    onClosed: $options.handleDialogClose\n  }, {\n    default: _withCtx(() => [$data.currentDish ? (_openBlock(), _createBlock(_component_MenuUpdateCard, {\n      key: 0,\n      dish: $data.currentDish,\n      onUpdateSuccess: $options.handleUpdateSuccess,\n      onClose: _cache[0] || (_cache[0] = $event => $data.updateDialogVisible = false)\n    }, null, 8 /* PROPS */, [\"dish\", \"onUpdateSuccess\"])) : _createCommentVNode(\"v-if\", true)]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\", \"onClosed\"])]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createVNode","_component_el_button","type","onClick","$options","getMenuList","default","_withCtx","_cache","_createTextVNode","_","_ctx","addDish","_component_el_table","data","$data","menuData","style","stripe","border","_component_el_table_column","prop","label","width","align","scope","_toDisplayString","row","dishName","dish_name","price","description","_component_el_image","src","imageUrl","image_url","fit","error","_hoisted_3","_component_el_icon","_component_Picture","fixed","size","$event","updateDish","deleteDish","_createCommentVNode","length","_hoisted_4","_component_el_empty","_component_el_dialog","modelValue","updateDialogVisible","title","onClosed","handleDialogClose","currentDish","_createBlock","_component_MenuUpdateCard","dish","onUpdateSuccess","handleUpdateSuccess","onClose"],"sources":["D:\\数据库课程设计（饭店系统）\\restaurant-ordering-system\\src\\components\\menu\\MenuForm.vue"],"sourcesContent":["<template>\r\n  <div class=\"p-5\">\r\n    <div class=\"flex justify-between items-center mb-5\">\r\n      <h2 class=\"m-0 text-gray-800 text-xl font-bold\">全部菜品信息</h2>\r\n      <el-button type=\"primary\" @click=\"getMenuList\">\r\n        刷新菜品列表\r\n      </el-button>\r\n      <el-button type=\"primary\" @click=\"addDish\">\r\n        添加菜品\r\n      </el-button>\r\n    </div>\r\n    \r\n    <el-table\r\n      :data=\"menuData\"\r\n      style=\"width: 100%\"\r\n      stripe\r\n      border>\r\n      <el-table-column\r\n        prop=\"dishId\"\r\n        label=\"菜品ID\"\r\n        width=\"120\"\r\n        align=\"center\">\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"dishName\"\r\n        label=\"菜品名称\"\r\n        width=\"180\"\r\n        align=\"center\">\r\n        <template #default=\"scope\">\r\n          {{ scope.row.dishName || scope.row.dish_name || '未知菜品' }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"price\"\r\n        label=\"价格\"\r\n        width=\"120\"\r\n        align=\"center\">\r\n        <template #default=\"scope\">\r\n          ¥{{ scope.row.price || '0.00' }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"description\"\r\n        label=\"描述\"\r\n        min-width=\"200\"\r\n        show-overflow-tooltip>\r\n        <template #default=\"scope\">\r\n          {{ scope.row.description || '暂无描述' }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"imageUrl\"\r\n        label=\"图片\"\r\n        width=\"200\"\r\n        align=\"center\">\r\n        <template #default=\"scope\">\r\n          <el-image\r\n            :src=\"scope.row.imageUrl || scope.row.image_url || 'https://images.unsplash.com/photo-1567620905732-2d1ec7ab7445?w=200&h=150&fit=crop'\"\r\n            class=\"w-20 h-20\"\r\n            fit=\"cover\"\r\n            :preview-src-list=\"[scope.row.imageUrl || scope.row.image_url || 'https://images.unsplash.com/photo-1567620905732-2d1ec7ab7445?w=200&h=150&fit=crop']\">\r\n            <template #error>\r\n              <div class=\"flex justify-center items-center w-20 h-20 bg-gray-100 text-gray-500 text-xl\">\r\n                <el-icon><Picture /></el-icon>\r\n              </div>\r\n            </template>\r\n          </el-image>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column\r\n        label=\"操作\"\r\n        width=\"150\"\r\n        align=\"center\"\r\n        fixed=\"right\">\r\n        <template #default=\"scope\">\r\n          <el-button size=\"small\" type=\"primary\" @click=\"updateDish(scope.row)\">\r\n            更新\r\n          </el-button>\r\n          <el-button size=\"small\" type=\"danger\" @click=\"deleteDish(scope.row)\">\r\n            删除\r\n          </el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    \r\n    <!-- 无数据提示 -->\r\n    <div v-if=\"!menuData || menuData.length === 0\" class=\"flex justify-center items-center min-h-50\">\r\n      <el-empty description=\"暂无菜品数据\" />\r\n    </div>\r\n\r\n    <!-- 更新菜品对话框 -->\r\n    <el-dialog v-model=\"updateDialogVisible\" title=\"更新菜品\" width=\"500px\" @closed=\"handleDialogClose\">\r\n        <MenuUpdateCard v-if=\"currentDish\" :dish=\"currentDish\" @update-success=\"handleUpdateSuccess\" @close=\"updateDialogVisible = false\" />\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { useMenuStore } from '@/stores/menu'\r\nimport { ElMessage, ElMessageBox } from 'element-plus'\r\nimport { Picture } from '@element-plus/icons-vue'\r\nimport MenuUpdateCard from './MenuUpdateCard.vue'\r\nimport { ref } from 'vue'\r\nexport default {\r\n  name: 'MenuForm',\r\n  components: {\r\n    Picture,\r\n    MenuUpdateCard\r\n  },\r\n  data() {\r\n    return {\r\n      menuData: [],\r\n      updateDialogVisible: false,\r\n      currentDish: null\r\n    }\r\n  },\r\n  mounted() {\r\n    this.getMenuList()\r\n  },\r\n  methods: {\r\n    async getMenuList() {\r\n      try {\r\n        const menuStore = useMenuStore()\r\n        await menuStore.fetchMenuList()\r\n        this.menuData = menuStore.menuList || []\r\n        \r\n        if (this.menuData.length > 0) {\r\n          ElMessage.success(`成功获取 ${this.menuData.length} 个菜品信息`)\r\n        } else {\r\n          ElMessage.warning('暂无菜品数据')\r\n        }\r\n      } catch (error) {\r\n        ElMessage.error('获取菜单失败: ' + (error.message || error))\r\n        console.error('获取菜单失败:', error)\r\n      }\r\n    },\r\n    \r\n    viewDish(dish) {\r\n      ElMessage.info(`查看菜品: ${dish.dishName || dish.dish_name}`)\r\n      console.log('菜品详情:', dish)\r\n    },\r\n    \r\n    async deleteDish(dish) {\r\n      try {\r\n        await ElMessageBox.confirm(\r\n          `确定要删除菜品 \"${dish.dishName || dish.dish_name}\" 吗？`,\r\n          '确认删除',\r\n          {\r\n            confirmButtonText: '确定',\r\n            cancelButtonText: '取消',\r\n            type: 'warning',\r\n          }\r\n        )\r\n        const menuStore = useMenuStore()\r\n        await menuStore.deleteDish(dish.dishId)\r\n        ElMessage.success('删除成功')\r\n        // 重新获取列表\r\n        this.getMenuList()\r\n      } catch (error) {\r\n        if (error !== 'cancel') {\r\n          ElMessage.error('删除失败: ' + error.message)\r\n        }\r\n      }\r\n    },\r\n\r\n    updateDish(dish) {\r\n      this.currentDish = dish\r\n      this.updateDialogVisible = true\r\n      console.log('菜品详情:', dish)\r\n    },\r\n\r\n    handleUpdateSuccess() {\r\n        this.updateDialogVisible = false;\r\n        this.getMenuList();\r\n        ElMessage.success('菜品更新成功');\r\n    },\r\n\r\n    handleDialogClose() {\r\n        this.currentDish = null;\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}