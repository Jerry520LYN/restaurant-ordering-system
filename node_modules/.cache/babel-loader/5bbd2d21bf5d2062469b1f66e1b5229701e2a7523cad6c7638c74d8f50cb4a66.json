{"ast":null,"code":"import { ref, onMounted, computed } from 'vue';\nimport { useCallingNumberStore } from '@/stores/callingNumber';\nexport default {\n  __name: 'CallingNumberView',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const store = useCallingNumberStore();\n    const form = ref({\n      phone: '',\n      peopleNumber: 1\n    });\n    const handleCallNumber = async () => {\n      if (!form.value.phone || !form.value.peopleNumber) return;\n      await store.callNumber(form.value.phone, form.value.peopleNumber);\n      form.value = {\n        phone: '',\n        peopleNumber: 1\n      };\n    };\n    const removeNumber = async row => {\n      await store.removeCallingNumber(row.callingNumberId);\n    };\n    const queueList = computed(() => {\n      // 展示所有队列合并\n      if (!store.queues) return [];\n      return Object.values(store.queues).flat();\n    });\n    onMounted(store.getQueues);\n    const __returned__ = {\n      store,\n      form,\n      handleCallNumber,\n      removeNumber,\n      queueList,\n      ref,\n      onMounted,\n      computed,\n      get useCallingNumberStore() {\n        return useCallingNumberStore;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","computed","useCallingNumberStore","store","form","phone","peopleNumber","handleCallNumber","value","callNumber","removeNumber","row","removeCallingNumber","callingNumberId","queueList","queues","Object","values","flat","getQueues"],"sources":["D:/数据库课程设计（饭店系统）/restaurant-ordering-system/src/views/CallingNumberView.vue"],"sourcesContent":["<template>\r\n  <div class=\"p-5\">\r\n    <div class=\"flex flex-row items-center w-full mb-5 gap-4\">\r\n      <h2 class=\"text-xl font-bold mb-0 whitespace-nowrap\" style=\"min-width: 100px;\">叫号服务</h2>\r\n      <el-form :model=\"form\" label-width=\"300px\" class=\"flex flex-row gap-4 flex-1 w-full\">\r\n        <el-form-item label=\"手机号\" class=\"mb-0 flex-1\">\r\n          <el-input v-model=\"form.phone\" placeholder=\"请输入手机号\" style=\"width: 100%;\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"人数\" class=\"mb-0 flex-1\">\r\n          <el-input-number v-model=\"form.peopleNumber\" :min=\"1\" style=\"width: 100%;\" />\r\n        </el-form-item>\r\n        <el-form-item class=\"mb-0\">\r\n          <el-button type=\"primary\" @click=\"handleCallNumber\">叫号</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </div>\r\n    <el-divider>当前队列</el-divider>\r\n    <el-table :data=\"queueList\" style=\"width: 100%\" border>\r\n      <el-table-column prop=\"callingNumberId\" label=\"叫号ID\" width=\"120\" align=\"center\" />\r\n      <el-table-column prop=\"phone\" label=\"手机号\" width=\"180\" align=\"center\" />\r\n      <el-table-column prop=\"peopleNumber\" label=\"人数\" width=\"100\" align=\"center\" />\r\n      <el-table-column prop=\"status\" label=\"状态\" width=\"120\" align=\"center\" />\r\n      <el-table-column label=\"操作\" width=\"120\" align=\"center\">\r\n        <template #default=\"scope\">\r\n          <el-button type=\"danger\" size=\"small\" @click=\"removeNumber(scope.row)\">移除</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n  </div>\r\n</template>\r\n<script setup>\r\nimport { ref, onMounted, computed } from 'vue'\r\nimport { useCallingNumberStore } from '@/stores/callingNumber'\r\n\r\nconst store = useCallingNumberStore()\r\nconst form = ref({ phone: '', peopleNumber: 1 })\r\n\r\nconst handleCallNumber = async () => {\r\n  if (!form.value.phone || !form.value.peopleNumber) return\r\n  await store.callNumber(form.value.phone, form.value.peopleNumber)\r\n  form.value = { phone: '', peopleNumber: 1 }\r\n}\r\nconst removeNumber = async (row) => {\r\n  await store.removeCallingNumber(row.callingNumberId)\r\n}\r\nconst queueList = computed(() => {\r\n  // 展示所有队列合并\r\n  if (!store.queues) return []\r\n  return Object.values(store.queues).flat()\r\n})\r\nonMounted(store.getQueues)\r\n</script> "],"mappings":"AA+BA,SAASA,GAAG,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,KAAK;AAC9C,SAASC,qBAAqB,QAAQ,wBAAwB;;;;;;;IAE9D,MAAMC,KAAK,GAAGD,qBAAqB,CAAC,CAAC;IACrC,MAAME,IAAI,GAAGL,GAAG,CAAC;MAAEM,KAAK,EAAE,EAAE;MAAEC,YAAY,EAAE;IAAE,CAAC,CAAC;IAEhD,MAAMC,gBAAgB,GAAG,MAAAA,CAAA,KAAY;MACnC,IAAI,CAACH,IAAI,CAACI,KAAK,CAACH,KAAK,IAAI,CAACD,IAAI,CAACI,KAAK,CAACF,YAAY,EAAE;MACnD,MAAMH,KAAK,CAACM,UAAU,CAACL,IAAI,CAACI,KAAK,CAACH,KAAK,EAAED,IAAI,CAACI,KAAK,CAACF,YAAY,CAAC;MACjEF,IAAI,CAACI,KAAK,GAAG;QAAEH,KAAK,EAAE,EAAE;QAAEC,YAAY,EAAE;MAAE,CAAC;IAC7C,CAAC;IACD,MAAMI,YAAY,GAAG,MAAOC,GAAG,IAAK;MAClC,MAAMR,KAAK,CAACS,mBAAmB,CAACD,GAAG,CAACE,eAAe,CAAC;IACtD,CAAC;IACD,MAAMC,SAAS,GAAGb,QAAQ,CAAC,MAAM;MAC/B;MACA,IAAI,CAACE,KAAK,CAACY,MAAM,EAAE,OAAO,EAAE;MAC5B,OAAOC,MAAM,CAACC,MAAM,CAACd,KAAK,CAACY,MAAM,CAAC,CAACG,IAAI,CAAC,CAAC;IAC3C,CAAC,CAAC;IACFlB,SAAS,CAACG,KAAK,CAACgB,SAAS,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}