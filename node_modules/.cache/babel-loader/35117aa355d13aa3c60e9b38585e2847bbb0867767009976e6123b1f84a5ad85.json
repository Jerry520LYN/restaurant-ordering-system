{"ast":null,"code":"import { useCustomerStore } from '@/stores/customer';\nimport { ref } from 'vue';\nexport default {\n  __name: 'CustomerAddCard',\n  emits: ['close', 'add-success'],\n  setup(__props, {\n    expose: __expose,\n    emit: __emit\n  }) {\n    __expose();\n    const customerStore = useCustomerStore();\n    const customerForm = ref({\n      id: ''\n    });\n    const vipLevels = [{\n      label: '普通用户',\n      value: '0'\n    }, {\n      label: 'VIP1',\n      value: '1'\n    }, {\n      label: 'VIP2',\n      value: '2'\n    }, {\n      label: 'VIP3',\n      value: '3'\n    }, {\n      label: 'VIP4',\n      value: '4'\n    }, {\n      label: 'VIP5',\n      value: '5'\n    }];\n    const emit = __emit;\n    const handleVipChange = val => {\n      // 生成A+8位数字的ID\n      if (val === '0') {\n        customerForm.value.id = val + Math.floor(10000000 + Math.random() * 90000000).toString();\n        return;\n      }\n      const randomNum = Math.floor(10000000 + Math.random() * 90000000); // 8位\n      customerForm.value.id = val + randomNum.toString();\n    };\n    const handleAdd = async () => {\n      if (!customerForm.value.name || !customerForm.value.phone) {\n        alert('请填写完整信息');\n        return;\n      }\n      await customerStore.addCustomer(customerForm.value);\n      emit('add-success');\n    };\n    const handleCancel = () => {\n      emit('close');\n    };\n    const __returned__ = {\n      customerStore,\n      customerForm,\n      vipLevels,\n      emit,\n      handleVipChange,\n      handleAdd,\n      handleCancel,\n      get useCustomerStore() {\n        return useCustomerStore;\n      },\n      ref\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["useCustomerStore","ref","customerStore","customerForm","id","vipLevels","label","value","emit","__emit","handleVipChange","val","Math","floor","random","toString","randomNum","handleAdd","name","phone","alert","addCustomer","handleCancel"],"sources":["D:/数据库课程设计（饭店系统）/restaurant-ordering-system/src/components/customer/CustomerAddCard.vue"],"sourcesContent":["<template>\r\n    <el-card>\r\n        <el-form :model=\"customerForm\" label-width=\"120px\">\r\n            <el-form-item label=\"用户类型\">\r\n                <el-select placeholder=\"请选择用户类型\" @change=\"handleVipChange\">\r\n                    <el-option v-for=\"level in vipLevels\" :key=\"level.value\" :label=\"level.label\" :value=\"level.value\" />\r\n                </el-select>\r\n            </el-form-item>\r\n            <el-form-item label=\"顾客ID\">\r\n                <el-input v-model=\"customerForm.id\" :disabled=\"true\" />\r\n            </el-form-item>\r\n            <el-form-item label=\"顾客姓名\">\r\n                <el-input v-model=\"customerForm.name\" />\r\n            </el-form-item>\r\n            <el-form-item label=\"顾客电话\">\r\n                <el-input v-model=\"customerForm.phone\" />\r\n            </el-form-item>\r\n            <el-form-item>\r\n                <el-button type=\"primary\" @click=\"handleAdd\">添加</el-button>\r\n                <el-button @click=\"handleCancel\">取消</el-button>\r\n            </el-form-item>\r\n        </el-form>\r\n    </el-card>\r\n</template>\r\n<script setup>\r\nimport { useCustomerStore } from '@/stores/customer';\r\nimport { ref, defineEmits } from 'vue';\r\nconst customerStore = useCustomerStore();\r\nconst customerForm = ref({ id: ''});\r\n\r\nconst vipLevels = [\r\n    { label: '普通用户', value: '0' },\r\n    { label: 'VIP1', value: '1' },\r\n    { label: 'VIP2', value: '2' },\r\n    { label: 'VIP3', value: '3' },\r\n    { label: 'VIP4', value: '4' },\r\n    { label: 'VIP5', value: '5' },\r\n];\r\n\r\nconst emit = defineEmits(['close', 'add-success']);\r\n\r\nconst handleVipChange = (val) => {\r\n    // 生成A+8位数字的ID\r\n    if (val === '0') {\r\n        customerForm.value.id = val+Math.floor(10000000 + Math.random() * 90000000).toString();\r\n        return;\r\n    }\r\n    const randomNum = Math.floor(10000000 + Math.random() * 90000000); // 8位\r\n    customerForm.value.id = val + randomNum.toString();\r\n\r\n};\r\n\r\nconst handleAdd = async () => {\r\n    if (!customerForm.value.name || !customerForm.value.phone) {\r\n        alert('请填写完整信息');\r\n        return;\r\n    }\r\n    await customerStore.addCustomer(customerForm.value);\r\n    emit('add-success');\r\n};\r\n\r\nconst handleCancel = () => {\r\n    emit('close');\r\n};\r\n</script>\r\n"],"mappings":"AAyBA,SAASA,gBAAgB,QAAQ,mBAAmB;AACpD,SAASC,GAAgB,QAAQ,KAAK;;;;;;;;;IACtC,MAAMC,aAAa,GAAGF,gBAAgB,CAAC,CAAC;IACxC,MAAMG,YAAY,GAAGF,GAAG,CAAC;MAAEG,EAAE,EAAE;IAAE,CAAC,CAAC;IAEnC,MAAMC,SAAS,GAAG,CACd;MAAEC,KAAK,EAAE,MAAM;MAAEC,KAAK,EAAE;IAAI,CAAC,EAC7B;MAAED,KAAK,EAAE,MAAM;MAAEC,KAAK,EAAE;IAAI,CAAC,EAC7B;MAAED,KAAK,EAAE,MAAM;MAAEC,KAAK,EAAE;IAAI,CAAC,EAC7B;MAAED,KAAK,EAAE,MAAM;MAAEC,KAAK,EAAE;IAAI,CAAC,EAC7B;MAAED,KAAK,EAAE,MAAM;MAAEC,KAAK,EAAE;IAAI,CAAC,EAC7B;MAAED,KAAK,EAAE,MAAM;MAAEC,KAAK,EAAE;IAAI,CAAC,CAChC;IAED,MAAMC,IAAI,GAAGC,MAAqC;IAElD,MAAMC,eAAe,GAAIC,GAAG,IAAK;MAC7B;MACA,IAAIA,GAAG,KAAK,GAAG,EAAE;QACbR,YAAY,CAACI,KAAK,CAACH,EAAE,GAAGO,GAAG,GAACC,IAAI,CAACC,KAAK,CAAC,QAAQ,GAAGD,IAAI,CAACE,MAAM,CAAC,CAAC,GAAG,QAAQ,CAAC,CAACC,QAAQ,CAAC,CAAC;QACtF;MACJ;MACA,MAAMC,SAAS,GAAGJ,IAAI,CAACC,KAAK,CAAC,QAAQ,GAAGD,IAAI,CAACE,MAAM,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC;MACnEX,YAAY,CAACI,KAAK,CAACH,EAAE,GAAGO,GAAG,GAAGK,SAAS,CAACD,QAAQ,CAAC,CAAC;IAEtD,CAAC;IAED,MAAME,SAAS,GAAG,MAAAA,CAAA,KAAY;MAC1B,IAAI,CAACd,YAAY,CAACI,KAAK,CAACW,IAAI,IAAI,CAACf,YAAY,CAACI,KAAK,CAACY,KAAK,EAAE;QACvDC,KAAK,CAAC,SAAS,CAAC;QAChB;MACJ;MACA,MAAMlB,aAAa,CAACmB,WAAW,CAAClB,YAAY,CAACI,KAAK,CAAC;MACnDC,IAAI,CAAC,aAAa,CAAC;IACvB,CAAC;IAED,MAAMc,YAAY,GAAGA,CAAA,KAAM;MACvBd,IAAI,CAAC,OAAO,CAAC;IACjB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}