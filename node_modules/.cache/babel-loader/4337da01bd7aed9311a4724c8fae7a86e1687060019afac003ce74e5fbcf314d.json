{"ast":null,"code":"import { useMenuStore } from '@/stores/menu';\nimport { ElMessage, ElMessageBox } from 'element-plus';\nimport { Picture } from '@element-plus/icons-vue';\nexport default {\n  name: 'MenuForm',\n  components: {\n    Picture\n  },\n  data() {\n    return {\n      menuData: [],\n      loading: false\n    };\n  },\n  mounted() {\n    this.getMenuList();\n  },\n  methods: {\n    async getMenuList() {\n      this.loading = true;\n      try {\n        const menuStore = useMenuStore();\n        await menuStore.fetchMenuList();\n        this.menuData = menuStore.menuList || [];\n        if (this.menuData.length > 0) {\n          ElMessage.success(`成功获取 ${this.menuData.length} 个菜品信息`);\n        } else {\n          ElMessage.warning('暂无菜品数据');\n        }\n      } catch (error) {\n        ElMessage.error('获取菜单失败: ' + (error.message || error));\n        console.error('获取菜单失败:', error);\n      } finally {\n        this.loading = false;\n      }\n    },\n    viewDish(dish) {\n      ElMessage.info(`查看菜品: ${dish.dishName || dish.dish_name}`);\n      console.log('菜品详情:', dish);\n    },\n    async deleteDish(dish) {\n      try {\n        await ElMessageBox.confirm(`确定要删除菜品 \"${dish.dishName || dish.dish_name}\" 吗？`, '确认删除', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        });\n\n        // 这里可以调用删除API\n        ElMessage.success('删除成功');\n        // 重新获取列表\n        this.getMenuList();\n      } catch (error) {\n        if (error !== 'cancel') {\n          ElMessage.error('删除失败: ' + error.message);\n        }\n      }\n    }\n  }\n};","map":{"version":3,"names":["useMenuStore","ElMessage","ElMessageBox","Picture","name","components","data","menuData","loading","mounted","getMenuList","methods","menuStore","fetchMenuList","menuList","length","success","warning","error","message","console","viewDish","dish","info","dishName","dish_name","log","deleteDish","confirm","confirmButtonText","cancelButtonText","type"],"sources":["D:\\数据库课程设计（饭店系统）\\restaurant-ordering-system\\src\\components\\menu\\MenuForm.vue"],"sourcesContent":["<template>\r\n  <div class=\"menu-form\">\r\n    <div class=\"header\">\r\n      <h2>全部菜品信息</h2>\r\n      <el-button type=\"primary\" @click=\"getMenuList\" :loading=\"loading\">\r\n        刷新菜品列表\r\n      </el-button>\r\n    </div>\r\n    \r\n    <el-table\r\n      :data=\"menuData\"\r\n      style=\"width: 100%\"\r\n      v-loading=\"loading\"\r\n      stripe\r\n      border>\r\n      <el-table-column\r\n        prop=\"dishId\"\r\n        label=\"菜品ID\"\r\n        width=\"100\"\r\n        align=\"center\">\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"dishName\"\r\n        label=\"菜品名称\"\r\n        width=\"150\"\r\n        align=\"center\">\r\n        <template #default=\"scope\">\r\n          {{ scope.row.dishName || scope.row.dish_name || '未知菜品' }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"price\"\r\n        label=\"价格\"\r\n        width=\"120\"\r\n        align=\"center\">\r\n        <template #default=\"scope\">\r\n          ¥{{ scope.row.price || '0.00' }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"description\"\r\n        label=\"描述\"\r\n        width=\"200\"\r\n        show-overflow-tooltip>\r\n        <template #default=\"scope\">\r\n          {{ scope.row.description || '暂无描述' }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"imageUrl\"\r\n        label=\"图片\"\r\n        width=\"150\"\r\n        align=\"center\">\r\n        <template #default=\"scope\">\r\n          <el-image\r\n            :src=\"scope.row.imageUrl || scope.row.image_url || 'https://images.unsplash.com/photo-1567620905732-2d1ec7ab7445?w=200&h=150&fit=crop'\"\r\n            style=\"width: 60px; height: 60px\"\r\n            fit=\"cover\"\r\n            :preview-src-list=\"[scope.row.imageUrl || scope.row.image_url || 'https://images.unsplash.com/photo-1567620905732-2d1ec7ab7445?w=200&h=150&fit=crop']\">\r\n            <template #error>\r\n              <div class=\"image-error\">\r\n                <el-icon><Picture /></el-icon>\r\n              </div>\r\n            </template>\r\n          </el-image>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column\r\n        label=\"操作\"\r\n        width=\"150\"\r\n        align=\"center\">\r\n        <template #default=\"scope\">\r\n          <el-button size=\"small\" type=\"primary\" @click=\"viewDish(scope.row)\">\r\n            查看\r\n          </el-button>\r\n          <el-button size=\"small\" type=\"danger\" @click=\"deleteDish(scope.row)\">\r\n            删除\r\n          </el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    \r\n    <!-- 无数据提示 -->\r\n    <div v-if=\"!loading && (!menuData || menuData.length === 0)\" class=\"no-data\">\r\n      <el-empty description=\"暂无菜品数据\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { useMenuStore } from '@/stores/menu'\r\nimport { ElMessage, ElMessageBox } from 'element-plus'\r\nimport { Picture } from '@element-plus/icons-vue'\r\n\r\nexport default {\r\n  name: 'MenuForm',\r\n  components: {\r\n    Picture\r\n  },\r\n  data() {\r\n    return {\r\n      menuData: [],\r\n      loading: false\r\n    }\r\n  },\r\n  mounted() {\r\n    this.getMenuList()\r\n  },\r\n  methods: {\r\n    async getMenuList() {\r\n      this.loading = true\r\n      try {\r\n        const menuStore = useMenuStore()\r\n        await menuStore.fetchMenuList()\r\n        this.menuData = menuStore.menuList || []\r\n        \r\n        if (this.menuData.length > 0) {\r\n          ElMessage.success(`成功获取 ${this.menuData.length} 个菜品信息`)\r\n        } else {\r\n          ElMessage.warning('暂无菜品数据')\r\n        }\r\n      } catch (error) {\r\n        ElMessage.error('获取菜单失败: ' + (error.message || error))\r\n        console.error('获取菜单失败:', error)\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n    \r\n    viewDish(dish) {\r\n      ElMessage.info(`查看菜品: ${dish.dishName || dish.dish_name}`)\r\n      console.log('菜品详情:', dish)\r\n    },\r\n    \r\n    async deleteDish(dish) {\r\n      try {\r\n        await ElMessageBox.confirm(\r\n          `确定要删除菜品 \"${dish.dishName || dish.dish_name}\" 吗？`,\r\n          '确认删除',\r\n          {\r\n            confirmButtonText: '确定',\r\n            cancelButtonText: '取消',\r\n            type: 'warning',\r\n          }\r\n        )\r\n        \r\n        // 这里可以调用删除API\r\n        ElMessage.success('删除成功')\r\n        // 重新获取列表\r\n        this.getMenuList()\r\n      } catch (error) {\r\n        if (error !== 'cancel') {\r\n          ElMessage.error('删除失败: ' + error.message)\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.menu-form {\r\n  padding: 20px;\r\n}\r\n\r\n.header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.header h2 {\r\n  margin: 0;\r\n  color: #333;\r\n}\r\n\r\n.no-data {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  min-height: 200px;\r\n}\r\n\r\n.image-error {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  width: 60px;\r\n  height: 60px;\r\n  background-color: #f5f5f5;\r\n  color: #999;\r\n  font-size: 20px;\r\n}\r\n</style>\r\n\r\n"],"mappings":"AA0FA,SAASA,YAAW,QAAS,eAAc;AAC3C,SAASC,SAAS,EAAEC,YAAW,QAAS,cAAa;AACrD,SAASC,OAAM,QAAS,yBAAwB;AAEhD,eAAe;EACbC,IAAI,EAAE,UAAU;EAChBC,UAAU,EAAE;IACVF;EACF,CAAC;EACDG,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,QAAQ,EAAE,EAAE;MACZC,OAAO,EAAE;IACX;EACF,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACC,WAAW,CAAC;EACnB,CAAC;EACDC,OAAO,EAAE;IACP,MAAMD,WAAWA,CAAA,EAAG;MAClB,IAAI,CAACF,OAAM,GAAI,IAAG;MAClB,IAAI;QACF,MAAMI,SAAQ,GAAIZ,YAAY,CAAC;QAC/B,MAAMY,SAAS,CAACC,aAAa,CAAC;QAC9B,IAAI,CAACN,QAAO,GAAIK,SAAS,CAACE,QAAO,IAAK,EAAC;QAEvC,IAAI,IAAI,CAACP,QAAQ,CAACQ,MAAK,GAAI,CAAC,EAAE;UAC5Bd,SAAS,CAACe,OAAO,CAAC,QAAQ,IAAI,CAACT,QAAQ,CAACQ,MAAM,QAAQ;QACxD,OAAO;UACLd,SAAS,CAACgB,OAAO,CAAC,QAAQ;QAC5B;MACF,EAAE,OAAOC,KAAK,EAAE;QACdjB,SAAS,CAACiB,KAAK,CAAC,UAAS,IAAKA,KAAK,CAACC,OAAM,IAAKD,KAAK,CAAC;QACrDE,OAAO,CAACF,KAAK,CAAC,SAAS,EAAEA,KAAK;MAChC,UAAU;QACR,IAAI,CAACV,OAAM,GAAI,KAAI;MACrB;IACF,CAAC;IAEDa,QAAQA,CAACC,IAAI,EAAE;MACbrB,SAAS,CAACsB,IAAI,CAAC,SAASD,IAAI,CAACE,QAAO,IAAKF,IAAI,CAACG,SAAS,EAAE;MACzDL,OAAO,CAACM,GAAG,CAAC,OAAO,EAAEJ,IAAI;IAC3B,CAAC;IAED,MAAMK,UAAUA,CAACL,IAAI,EAAE;MACrB,IAAI;QACF,MAAMpB,YAAY,CAAC0B,OAAO,CACxB,YAAYN,IAAI,CAACE,QAAO,IAAKF,IAAI,CAACG,SAAS,MAAM,EACjD,MAAM,EACN;UACEI,iBAAiB,EAAE,IAAI;UACvBC,gBAAgB,EAAE,IAAI;UACtBC,IAAI,EAAE;QACR,CACF;;QAEA;QACA9B,SAAS,CAACe,OAAO,CAAC,MAAM;QACxB;QACA,IAAI,CAACN,WAAW,CAAC;MACnB,EAAE,OAAOQ,KAAK,EAAE;QACd,IAAIA,KAAI,KAAM,QAAQ,EAAE;UACtBjB,SAAS,CAACiB,KAAK,CAAC,QAAO,GAAIA,KAAK,CAACC,OAAO;QAC1C;MACF;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}